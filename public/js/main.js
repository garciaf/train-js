(function(){var t=this,e=t._,n={},i=Array.prototype,r=Object.prototype,o=Function.prototype,s=i.push,a=i.slice,u=i.concat,c=r.toString,d=r.hasOwnProperty,l=i.forEach,h=i.map,p=i.reduce,f=i.reduceRight,m=i.filter,y=i.every,g=i.some,v=i.indexOf,_=i.lastIndexOf,x=Array.isArray,E=Object.keys,b=o.bind,S=function(t){return t instanceof S?t:this instanceof S?(this._wrapped=t,void 0):new S(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=S),exports._=S):t._=S,S.VERSION="1.4.4";var w=S.each=S.forEach=function(t,e,i){if(null!=t)if(l&&t.forEach===l)t.forEach(e,i);else if(t.length===+t.length){for(var r=0,o=t.length;o>r;r++)if(e.call(i,t[r],r,t)===n)return}else for(var s in t)if(S.has(t,s)&&e.call(i,t[s],s,t)===n)return};S.map=S.collect=function(t,e,n){var i=[];return null==t?i:h&&t.map===h?t.map(e,n):(w(t,function(t,r,o){i[i.length]=e.call(n,t,r,o)}),i)};var A="Reduce of empty array with no initial value";S.reduce=S.foldl=S.inject=function(t,e,n,i){var r=arguments.length>2;if(null==t&&(t=[]),p&&t.reduce===p)return i&&(e=S.bind(e,i)),r?t.reduce(e,n):t.reduce(e);if(w(t,function(t,o,s){r?n=e.call(i,n,t,o,s):(n=t,r=!0)}),!r)throw new TypeError(A);return n},S.reduceRight=S.foldr=function(t,e,n,i){var r=arguments.length>2;if(null==t&&(t=[]),f&&t.reduceRight===f)return i&&(e=S.bind(e,i)),r?t.reduceRight(e,n):t.reduceRight(e);var o=t.length;if(o!==+o){var s=S.keys(t);o=s.length}if(w(t,function(a,u,c){u=s?s[--o]:--o,r?n=e.call(i,n,t[u],u,c):(n=t[u],r=!0)}),!r)throw new TypeError(A);return n},S.find=S.detect=function(t,e,n){var i;return N(t,function(t,r,o){return e.call(n,t,r,o)?(i=t,!0):void 0}),i},S.filter=S.select=function(t,e,n){var i=[];return null==t?i:m&&t.filter===m?t.filter(e,n):(w(t,function(t,r,o){e.call(n,t,r,o)&&(i[i.length]=t)}),i)},S.reject=function(t,e,n){return S.filter(t,function(t,i,r){return!e.call(n,t,i,r)},n)},S.every=S.all=function(t,e,i){e||(e=S.identity);var r=!0;return null==t?r:y&&t.every===y?t.every(e,i):(w(t,function(t,o,s){return(r=r&&e.call(i,t,o,s))?void 0:n}),!!r)};var N=S.some=S.any=function(t,e,i){e||(e=S.identity);var r=!1;return null==t?r:g&&t.some===g?t.some(e,i):(w(t,function(t,o,s){return r||(r=e.call(i,t,o,s))?n:void 0}),!!r)};S.contains=S.include=function(t,e){return null==t?!1:v&&t.indexOf===v?-1!=t.indexOf(e):N(t,function(t){return t===e})},S.invoke=function(t,e){var n=a.call(arguments,2),i=S.isFunction(e);return S.map(t,function(t){return(i?e:t[e]).apply(t,n)})},S.pluck=function(t,e){return S.map(t,function(t){return t[e]})},S.where=function(t,e,n){return S.isEmpty(e)?n?null:[]:S[n?"find":"filter"](t,function(t){for(var n in e)if(e[n]!==t[n])return!1;return!0})},S.findWhere=function(t,e){return S.where(t,e,!0)},S.max=function(t,e,n){if(!e&&S.isArray(t)&&t[0]===+t[0]&&65535>t.length)return Math.max.apply(Math,t);if(!e&&S.isEmpty(t))return-1/0;var i={computed:-1/0,value:-1/0};return w(t,function(t,r,o){var s=e?e.call(n,t,r,o):t;s>=i.computed&&(i={value:t,computed:s})}),i.value},S.min=function(t,e,n){if(!e&&S.isArray(t)&&t[0]===+t[0]&&65535>t.length)return Math.min.apply(Math,t);if(!e&&S.isEmpty(t))return 1/0;var i={computed:1/0,value:1/0};return w(t,function(t,r,o){var s=e?e.call(n,t,r,o):t;i.computed>s&&(i={value:t,computed:s})}),i.value},S.shuffle=function(t){var e,n=0,i=[];return w(t,function(t){e=S.random(n++),i[n-1]=i[e],i[e]=t}),i};var T=function(t){return S.isFunction(t)?t:function(e){return e[t]}};S.sortBy=function(t,e,n){var i=T(e);return S.pluck(S.map(t,function(t,e,r){return{value:t,index:e,criteria:i.call(n,t,e,r)}}).sort(function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return t.index<e.index?-1:1}),"value")};var L=function(t,e,n,i){var r={},o=T(e||S.identity);return w(t,function(e,s){var a=o.call(n,e,s,t);i(r,a,e)}),r};S.groupBy=function(t,e,n){return L(t,e,n,function(t,e,n){(S.has(t,e)?t[e]:t[e]=[]).push(n)})},S.countBy=function(t,e,n){return L(t,e,n,function(t,e){S.has(t,e)||(t[e]=0),t[e]++})},S.sortedIndex=function(t,e,n,i){n=null==n?S.identity:T(n);for(var r=n.call(i,e),o=0,s=t.length;s>o;){var a=o+s>>>1;r>n.call(i,t[a])?o=a+1:s=a}return o},S.toArray=function(t){return t?S.isArray(t)?a.call(t):t.length===+t.length?S.map(t,S.identity):S.values(t):[]},S.size=function(t){return null==t?0:t.length===+t.length?t.length:S.keys(t).length},S.first=S.head=S.take=function(t,e,n){return null==t?void 0:null==e||n?t[0]:a.call(t,0,e)},S.initial=function(t,e,n){return a.call(t,0,t.length-(null==e||n?1:e))},S.last=function(t,e,n){return null==t?void 0:null==e||n?t[t.length-1]:a.call(t,Math.max(t.length-e,0))},S.rest=S.tail=S.drop=function(t,e,n){return a.call(t,null==e||n?1:e)},S.compact=function(t){return S.filter(t,S.identity)};var R=function(t,e,n){return w(t,function(t){S.isArray(t)?e?s.apply(n,t):R(t,e,n):n.push(t)}),n};S.flatten=function(t,e){return R(t,e,[])},S.without=function(t){return S.difference(t,a.call(arguments,1))},S.uniq=S.unique=function(t,e,n,i){S.isFunction(e)&&(i=n,n=e,e=!1);var r=n?S.map(t,n,i):t,o=[],s=[];return w(r,function(n,i){(e?i&&s[s.length-1]===n:S.contains(s,n))||(s.push(n),o.push(t[i]))}),o},S.union=function(){return S.uniq(u.apply(i,arguments))},S.intersection=function(t){var e=a.call(arguments,1);return S.filter(S.uniq(t),function(t){return S.every(e,function(e){return S.indexOf(e,t)>=0})})},S.difference=function(t){var e=u.apply(i,a.call(arguments,1));return S.filter(t,function(t){return!S.contains(e,t)})},S.zip=function(){for(var t=a.call(arguments),e=S.max(S.pluck(t,"length")),n=Array(e),i=0;e>i;i++)n[i]=S.pluck(t,""+i);return n},S.object=function(t,e){if(null==t)return{};for(var n={},i=0,r=t.length;r>i;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n},S.indexOf=function(t,e,n){if(null==t)return-1;var i=0,r=t.length;if(n){if("number"!=typeof n)return i=S.sortedIndex(t,e),t[i]===e?i:-1;i=0>n?Math.max(0,r+n):n}if(v&&t.indexOf===v)return t.indexOf(e,n);for(;r>i;i++)if(t[i]===e)return i;return-1},S.lastIndexOf=function(t,e,n){if(null==t)return-1;var i=null!=n;if(_&&t.lastIndexOf===_)return i?t.lastIndexOf(e,n):t.lastIndexOf(e);for(var r=i?n:t.length;r--;)if(t[r]===e)return r;return-1},S.range=function(t,e,n){1>=arguments.length&&(e=t||0,t=0),n=arguments[2]||1;for(var i=Math.max(Math.ceil((e-t)/n),0),r=0,o=Array(i);i>r;)o[r++]=t,t+=n;return o},S.bind=function(t,e){if(t.bind===b&&b)return b.apply(t,a.call(arguments,1));var n=a.call(arguments,2);return function(){return t.apply(e,n.concat(a.call(arguments)))}},S.partial=function(t){var e=a.call(arguments,1);return function(){return t.apply(this,e.concat(a.call(arguments)))}},S.bindAll=function(t){var e=a.call(arguments,1);return 0===e.length&&(e=S.functions(t)),w(e,function(e){t[e]=S.bind(t[e],t)}),t},S.memoize=function(t,e){var n={};return e||(e=S.identity),function(){var i=e.apply(this,arguments);return S.has(n,i)?n[i]:n[i]=t.apply(this,arguments)}},S.delay=function(t,e){var n=a.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},S.defer=function(t){return S.delay.apply(S,[t,1].concat(a.call(arguments,1)))},S.throttle=function(t,e){var n,i,r,o,s=0,a=function(){s=new Date,r=null,o=t.apply(n,i)};return function(){var u=new Date,c=e-(u-s);return n=this,i=arguments,0>=c?(clearTimeout(r),r=null,s=u,o=t.apply(n,i)):r||(r=setTimeout(a,c)),o}},S.debounce=function(t,e,n){var i,r;return function(){var o=this,s=arguments,a=function(){i=null,n||(r=t.apply(o,s))},u=n&&!i;return clearTimeout(i),i=setTimeout(a,e),u&&(r=t.apply(o,s)),r}},S.once=function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}},S.wrap=function(t,e){return function(){var n=[t];return s.apply(n,arguments),e.apply(this,n)}},S.compose=function(){var t=arguments;return function(){for(var e=arguments,n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},S.after=function(t,e){return 0>=t?e():function(){return 1>--t?e.apply(this,arguments):void 0}},S.keys=E||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var n in t)S.has(t,n)&&(e[e.length]=n);return e},S.values=function(t){var e=[];for(var n in t)S.has(t,n)&&e.push(t[n]);return e},S.pairs=function(t){var e=[];for(var n in t)S.has(t,n)&&e.push([n,t[n]]);return e},S.invert=function(t){var e={};for(var n in t)S.has(t,n)&&(e[t[n]]=n);return e},S.functions=S.methods=function(t){var e=[];for(var n in t)S.isFunction(t[n])&&e.push(n);return e.sort()},S.extend=function(t){return w(a.call(arguments,1),function(e){if(e)for(var n in e)t[n]=e[n]}),t},S.pick=function(t){var e={},n=u.apply(i,a.call(arguments,1));return w(n,function(n){n in t&&(e[n]=t[n])}),e},S.omit=function(t){var e={},n=u.apply(i,a.call(arguments,1));for(var r in t)S.contains(n,r)||(e[r]=t[r]);return e},S.defaults=function(t){return w(a.call(arguments,1),function(e){if(e)for(var n in e)null==t[n]&&(t[n]=e[n])}),t},S.clone=function(t){return S.isObject(t)?S.isArray(t)?t.slice():S.extend({},t):t},S.tap=function(t,e){return e(t),t};var O=function(t,e,n,i){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof S&&(t=t._wrapped),e instanceof S&&(e=e._wrapped);var r=c.call(t);if(r!=c.call(e))return!1;switch(r){case"[object String]":return t==e+"";case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var o=n.length;o--;)if(n[o]==t)return i[o]==e;n.push(t),i.push(e);var s=0,a=!0;if("[object Array]"==r){if(s=t.length,a=s==e.length)for(;s--&&(a=O(t[s],e[s],n,i)););}else{var u=t.constructor,d=e.constructor;if(u!==d&&!(S.isFunction(u)&&u instanceof u&&S.isFunction(d)&&d instanceof d))return!1;for(var l in t)if(S.has(t,l)&&(s++,!(a=S.has(e,l)&&O(t[l],e[l],n,i))))break;if(a){for(l in e)if(S.has(e,l)&&!s--)break;a=!s}}return n.pop(),i.pop(),a};S.isEqual=function(t,e){return O(t,e,[],[])},S.isEmpty=function(t){if(null==t)return!0;if(S.isArray(t)||S.isString(t))return 0===t.length;for(var e in t)if(S.has(t,e))return!1;return!0},S.isElement=function(t){return!(!t||1!==t.nodeType)},S.isArray=x||function(t){return"[object Array]"==c.call(t)},S.isObject=function(t){return t===Object(t)},w(["Arguments","Function","String","Number","Date","RegExp"],function(t){S["is"+t]=function(e){return c.call(e)=="[object "+t+"]"}}),S.isArguments(arguments)||(S.isArguments=function(t){return!(!t||!S.has(t,"callee"))}),S.isFunction=function(t){return"function"==typeof t},S.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},S.isNaN=function(t){return S.isNumber(t)&&t!=+t},S.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==c.call(t)},S.isNull=function(t){return null===t},S.isUndefined=function(t){return void 0===t},S.has=function(t,e){return d.call(t,e)},S.noConflict=function(){return t._=e,this},S.identity=function(t){return t},S.times=function(t,e,n){for(var i=Array(t),r=0;t>r;r++)i[r]=e.call(n,r);return i},S.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))};var M={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};M.unescape=S.invert(M.escape);var I={escape:RegExp("["+S.keys(M.escape).join("")+"]","g"),unescape:RegExp("("+S.keys(M.unescape).join("|")+")","g")};S.each(["escape","unescape"],function(t){S[t]=function(e){return null==e?"":(""+e).replace(I[t],function(e){return M[t][e]})}}),S.result=function(t,e){if(null==t)return null;var n=t[e];return S.isFunction(n)?n.call(t):n},S.mixin=function(t){w(S.functions(t),function(e){var n=S[e]=t[e];S.prototype[e]=function(){var t=[this._wrapped];return s.apply(t,arguments),H.call(this,n.apply(S,t))}})};var k=0;S.uniqueId=function(t){var e=++k+"";return t?t+e:e},S.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var C=/(.)^/,P={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},D=/\\|'|\r|\n|\t|\u2028|\u2029/g;S.template=function(t,e,n){var i;n=S.defaults({},n,S.templateSettings);var r=RegExp([(n.escape||C).source,(n.interpolate||C).source,(n.evaluate||C).source].join("|")+"|$","g"),o=0,s="__p+='";t.replace(r,function(e,n,i,r,a){return s+=t.slice(o,a).replace(D,function(t){return"\\"+P[t]}),n&&(s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),i&&(s+="'+\n((__t=("+i+"))==null?'':__t)+\n'"),r&&(s+="';\n"+r+"\n__p+='"),o=a+e.length,e}),s+="';\n",n.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{i=Function(n.variable||"obj","_",s)}catch(a){throw a.source=s,a}if(e)return i(e,S);var u=function(t){return i.call(this,t,S)};return u.source="function("+(n.variable||"obj")+"){\n"+s+"}",u},S.chain=function(t){return S(t).chain()};var H=function(t){return this._chain?S(t).chain():t};S.mixin(S),w(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=i[t];S.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!=t&&"splice"!=t||0!==n.length||delete n[0],H.call(this,n)}}),w(["concat","join","slice"],function(t){var e=i[t];S.prototype[t]=function(){return H.call(this,e.apply(this._wrapped,arguments))}}),S.extend(S.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this),define("underscore",function(t){return function(){var e;return e||t._}}(this)),function(t){String.prototype.trim===t&&(String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}),Array.prototype.reduce===t&&(Array.prototype.reduce=function(e){if(void 0===this||null===this)throw new TypeError;var n,i=Object(this),r=i.length>>>0,o=0;if("function"!=typeof e)throw new TypeError;if(0==r&&1==arguments.length)throw new TypeError;if(arguments.length>=2)n=arguments[1];else for(;;){if(o in i){n=i[o++];break}if(++o>=r)throw new TypeError}for(;r>o;)o in i&&(n=e.call(t,n,i[o],o,i)),o++;return n})}();var Zepto=function(){function t(t){return"[object Function]"==U.call(t)}function e(t){return t instanceof Object}function n(e){var n,i;if("[object Object]"!==U.call(e))return!1;if(i=t(e.constructor)&&e.constructor.prototype,!i||!hasOwnProperty.call(i,"isPrototypeOf"))return!1;for(n in e);return n===m||hasOwnProperty.call(e,n)}function i(t){return t instanceof Array}function r(t){return"number"==typeof t.length}function o(t){return t.filter(function(t){return t!==m&&null!==t})}function s(t){return t.length>0?[].concat.apply([],t):t}function a(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function u(t){return t in A?A[t]:A[t]=RegExp("(^|\\s)"+t+"(\\s|$)")}function c(t,e){return"number"!=typeof e||T[a(t)]?e:e+"px"}function d(t){var e,n;return w[t]||(e=S.createElement(t),S.body.appendChild(e),n=N(e,"").getPropertyValue("display"),e.parentNode.removeChild(e),"none"==n&&(n="block"),w[t]=n),w[t]}function l(t,e){return e===m?g(t):g(t).filter(e)}function h(e,n,i,r){return t(n)?n.call(e,i,r):n}function p(t,e,n){var i=t%2?e:e.parentNode;i?i.insertBefore(n,t?1==t?i.firstChild:2==t?e:null:e.nextSibling):g(n).remove()}function f(t,e){e(t);for(var n in t.childNodes)f(t.childNodes[n],e)}var m,y,g,v,_,x,E=[],b=E.slice,S=window.document,w={},A={},N=S.defaultView.getComputedStyle,T={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},L=/^\s*<(\w+|!)[^>]*>/,R=[1,3,8,9,11],O=["after","prepend","before","append"],M=S.createElement("table"),I=S.createElement("tr"),k={tr:S.createElement("tbody"),tbody:M,thead:M,tfoot:M,td:I,th:I,"*":S.createElement("div")},C=/complete|loaded|interactive/,P=/^\.([\w-]+)$/,D=/^#([\w-]+)$/,H=/^[\w-]+$/,U={}.toString,j={},V=S.createElement("div");return j.matches=function(t,e){if(!t||1!==t.nodeType)return!1;var n=t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.matchesSelector;if(n)return n.call(t,e);var i,r=t.parentNode,o=!r;return o&&(r=V).appendChild(t),i=~j.qsa(r,e).indexOf(t),o&&V.removeChild(t),i},_=function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})},x=function(t){return t.filter(function(e,n){return t.indexOf(e)==n})},j.fragment=function(t,e){e===m&&(e=L.test(t)&&RegExp.$1),e in k||(e="*");var n=k[e];return n.innerHTML=""+t,g.each(b.call(n.childNodes),function(){n.removeChild(this)})},j.Z=function(t,e){return t=t||[],t.__proto__=arguments.callee.prototype,t.selector=e||"",t},j.isZ=function(t){return t instanceof j.Z},j.init=function(e,r){if(!e)return j.Z();if(t(e))return g(S).ready(e);if(j.isZ(e))return e;var s;if(i(e))s=o(e);else if(n(e))s=[g.extend({},e)],e=null;else if(R.indexOf(e.nodeType)>=0||e===window)s=[e],e=null;else if(L.test(e))s=j.fragment(e.trim(),RegExp.$1),e=null;else{if(r!==m)return g(r).find(e);s=j.qsa(S,e)}return j.Z(s,e)},g=function(t,e){return j.init(t,e)},g.extend=function(t){return b.call(arguments,1).forEach(function(e){for(y in e)e[y]!==m&&(t[y]=e[y])}),t},j.qsa=function(t,e){var n;return t===S&&D.test(e)?(n=t.getElementById(RegExp.$1))?[n]:E:1!==t.nodeType&&9!==t.nodeType?E:b.call(P.test(e)?t.getElementsByClassName(RegExp.$1):H.test(e)?t.getElementsByTagName(e):t.querySelectorAll(e))},g.isFunction=t,g.isObject=e,g.isArray=i,g.isPlainObject=n,g.inArray=function(t,e,n){return E.indexOf.call(e,t,n)},g.trim=function(t){return t.trim()},g.uuid=0,g.map=function(t,e){var n,i,o,a=[];if(r(t))for(i=0;t.length>i;i++)n=e(t[i],i),null!=n&&a.push(n);else for(o in t)n=e(t[o],o),null!=n&&a.push(n);return s(a)},g.each=function(t,e){var n,i;if(r(t)){for(n=0;t.length>n;n++)if(e.call(t[n],n,t[n])===!1)return t}else for(i in t)if(e.call(t[i],i,t[i])===!1)return t;return t},g.fn={forEach:E.forEach,reduce:E.reduce,push:E.push,indexOf:E.indexOf,concat:E.concat,map:function(t){return g.map(this,function(e,n){return t.call(e,n,e)})},slice:function(){return g(b.apply(this,arguments))},ready:function(t){return C.test(S.readyState)?t(g):S.addEventListener("DOMContentLoaded",function(){t(g)},!1),this},get:function(t){return t===m?b.call(this):this[t]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(t){return this.forEach(function(e,n){t.call(e,n,e)}),this},filter:function(t){return g([].filter.call(this,function(e){return j.matches(e,t)}))},add:function(t,e){return g(x(this.concat(g(t,e))))},is:function(t){return this.length>0&&j.matches(this[0],t)},not:function(e){var n=[];if(t(e)&&e.call!==m)this.each(function(t){e.call(this,t)||n.push(this)});else{var i="string"==typeof e?this.filter(e):r(e)&&t(e.item)?b.call(e):g(e);this.forEach(function(t){0>i.indexOf(t)&&n.push(t)})}return g(n)},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},first:function(){var t=this[0];return t&&!e(t)?t:g(t)},last:function(){var t=this[this.length-1];return t&&!e(t)?t:g(t)},find:function(t){var e;return e=1==this.length?j.qsa(this[0],t):this.map(function(){return j.qsa(this,t)}),g(e)},closest:function(t,e){for(var n=this[0];n&&!j.matches(n,t);)n=n!==e&&n!==S&&n.parentNode;return g(n)},parents:function(t){for(var e=[],n=this;n.length>0;)n=g.map(n,function(t){return(t=t.parentNode)&&t!==S&&0>e.indexOf(t)?(e.push(t),t):void 0});return l(e,t)},parent:function(t){return l(x(this.pluck("parentNode")),t)},children:function(t){return l(this.map(function(){return b.call(this.children)}),t)},siblings:function(t){return l(this.map(function(t,e){return b.call(e.parentNode.children).filter(function(t){return t!==e})}),t)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(t){return this.map(function(){return this[t]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=null),"none"==N(this,"").getPropertyValue("display")&&(this.style.display=d(this.nodeName))})},replaceWith:function(t){return this.before(t).remove()},wrap:function(t){return this.each(function(){g(this).wrapAll(g(t)[0].cloneNode(!1))})},wrapAll:function(t){return this[0]&&(g(this[0]).before(t=g(t)),t.append(this)),this},unwrap:function(){return this.parent().each(function(){g(this).replaceWith(g(this).children())}),this},clone:function(){return g(this.map(function(){return this.cloneNode(!0)}))},hide:function(){return this.css("display","none")},toggle:function(t){return(t===m?"none"==this.css("display"):t)?this.show():this.hide()},prev:function(){return g(this.pluck("previousElementSibling"))},next:function(){return g(this.pluck("nextElementSibling"))},html:function(t){return t===m?this.length>0?this[0].innerHTML:null:this.each(function(e){var n=this.innerHTML;g(this).empty().append(h(this,t,e,n))})},text:function(t){return t===m?this.length>0?this[0].textContent:null:this.each(function(){this.textContent=t})},attr:function(t,n){var i;return"string"==typeof t&&n===m?0==this.length||1!==this[0].nodeType?m:"value"==t&&"INPUT"==this[0].nodeName?this.val():!(i=this[0].getAttribute(t))&&t in this[0]?this[0][t]:i:this.each(function(i){if(1===this.nodeType)if(e(t))for(y in t)this.setAttribute(y,t[y]);else this.setAttribute(t,h(this,n,i,this.getAttribute(t)))})},removeAttr:function(t){return this.each(function(){1===this.nodeType&&this.removeAttribute(t)})},prop:function(t,e){return e===m?this[0]?this[0][t]:m:this.each(function(n){this[t]=h(this,e,n,this[t])})},data:function(t,e){var n=this.attr("data-"+a(t),e);return null!==n?n:m},val:function(t){return t===m?this.length>0?this[0].value:m:this.each(function(e){this.value=h(this,t,e,this.value)})},offset:function(){if(0==this.length)return null;var t=this[0].getBoundingClientRect();return{left:t.left+window.pageXOffset,top:t.top+window.pageYOffset,width:t.width,height:t.height}},css:function(t,e){if(e===m&&"string"==typeof t)return 0==this.length?m:this[0].style[_(t)]||N(this[0],"").getPropertyValue(t);var n="";for(y in t)"string"==typeof t[y]&&""==t[y]?this.each(function(){this.style.removeProperty(a(y))}):n+=a(y)+":"+c(y,t[y])+";";return"string"==typeof t&&(""==e?this.each(function(){this.style.removeProperty(a(t))}):n=a(t)+":"+c(t,e)),this.each(function(){this.style.cssText+=";"+n})},index:function(t){return t?this.indexOf(g(t)[0]):this.parent().children().indexOf(this[0])},hasClass:function(t){return 1>this.length?!1:u(t).test(this[0].className)},addClass:function(t){return this.each(function(e){v=[];var n=this.className,i=h(this,t,e,n);i.split(/\s+/g).forEach(function(t){g(this).hasClass(t)||v.push(t)},this),v.length&&(this.className+=(n?" ":"")+v.join(" "))})},removeClass:function(t){return this.each(function(e){return t===m?this.className="":(v=this.className,h(this,t,e,v).split(/\s+/g).forEach(function(t){v=v.replace(u(t)," ")}),this.className=v.trim(),void 0)})},toggleClass:function(t,e){return this.each(function(n){var i=h(this,t,n,this.className);(e===m?!g(this).hasClass(i):e)?g(this).addClass(i):g(this).removeClass(i)})}},["width","height"].forEach(function(t){g.fn[t]=function(e){var n,i=t.replace(/./,function(t){return t[0].toUpperCase()});return e===m?this[0]==window?window["inner"+i]:this[0]==S?S.documentElement["offset"+i]:(n=this.offset())&&n[t]:this.each(function(n){var i=g(this);i.css(t,h(this,e,n,i[t]()))})}}),O.forEach(function(t,n){g.fn[t]=function(){var t=g.map(arguments,function(t){return e(t)?t:j.fragment(t)});if(1>t.length)return this;var i=this.length,r=i>1,o=2>n;return this.each(function(e,s){for(var a=0;t.length>a;a++){var u=t[o?t.length-a-1:a];f(u,function(t){null!=t.nodeName&&"SCRIPT"===t.nodeName.toUpperCase()&&(!t.type||"text/javascript"===t.type)&&window.eval.call(window,t.innerHTML)}),r&&i-1>e&&(u=u.cloneNode(!0)),p(n,s,u)}})},g.fn[n%2?t+"To":"insert"+(n?"Before":"After")]=function(e){return g(e)[t](this),this}}),j.Z.prototype=g.fn,j.camelize=_,j.uniq=x,g.zepto=j,g}();window.Zepto=Zepto,"$"in window||(window.$=Zepto),function(t){function e(t){return t._zid||(t._zid=l++)}function n(t,n,o,s){if(n=i(n),n.ns)var a=r(n.ns);return(d[e(t)]||[]).filter(function(t){return!(!t||n.e&&t.e!=n.e||n.ns&&!a.test(t.ns)||o&&e(t.fn)!==e(o)||s&&t.sel!=s)})}function i(t){var e=(""+t).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}function r(t){return RegExp("(?:^| )"+t.replace(" "," .* ?")+"(?: |$)")}function o(e,n,i){t.isObject(e)?t.each(e,i):e.split(/\s/).forEach(function(t){i(t,n)})}function s(n,r,s,a,u,c){c=!!c;var l=e(n),h=d[l]||(d[l]=[]);o(r,s,function(e,r){var o=u&&u(r,e),s=o||r,d=function(t){var e=s.apply(n,[t].concat(t.data));return e===!1&&t.preventDefault(),e},l=t.extend(i(e),{fn:r,proxy:d,sel:a,del:o,i:h.length});h.push(l),n.addEventListener(l.e,d,c)})}function a(t,i,r,s){var a=e(t);o(i||"",r,function(e,i){n(t,e,i,s).forEach(function(e){delete d[a][e.i],t.removeEventListener(e.e,e.proxy,!1)})})}function u(e){var n=t.extend({originalEvent:e},e);return t.each(m,function(t,i){n[t]=function(){return this[i]=p,e[t].apply(e,arguments)},n[i]=f}),n}function c(t){if(!("defaultPrevented"in t)){t.defaultPrevented=!1;var e=t.preventDefault;t.preventDefault=function(){this.defaultPrevented=!0,e.call(this)}}}var d=(t.zepto.qsa,{}),l=1,h={};h.click=h.mousedown=h.mouseup=h.mousemove="MouseEvents",t.event={add:s,remove:a},t.proxy=function(n,i){if(t.isFunction(n)){var r=function(){return n.apply(i,arguments)};return r._zid=e(n),r}if("string"==typeof i)return t.proxy(n[i],n);throw new TypeError("expected function")},t.fn.bind=function(t,e){return this.each(function(){s(this,t,e)})},t.fn.unbind=function(t,e){return this.each(function(){a(this,t,e)})},t.fn.one=function(t,e){return this.each(function(n,i){s(this,t,e,null,function(t,e){return function(){var n=t.apply(i,arguments);return a(i,e,t),n}})})};var p=function(){return!0},f=function(){return!1},m={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};t.fn.delegate=function(e,n,i){var r=!1;return("blur"==n||"focus"==n)&&(t.iswebkit?n="blur"==n?"focusout":"focus"==n?"focusin":n:r=!0),this.each(function(o,a){s(a,n,i,e,function(n){return function(i){var r,o=t(i.target).closest(e,a).get(0);return o?(r=t.extend(u(i),{currentTarget:o,liveFired:a}),n.apply(o,[r].concat([].slice.call(arguments,1)))):void 0}},r)})},t.fn.undelegate=function(t,e,n){return this.each(function(){a(this,e,n,t)})},t.fn.live=function(e,n){return t(document.body).delegate(this.selector,e,n),this},t.fn.die=function(e,n){return t(document.body).undelegate(this.selector,e,n),this},t.fn.on=function(e,n,i){return void 0==n||t.isFunction(n)?this.bind(e,n):this.delegate(n,e,i)},t.fn.off=function(e,n,i){return void 0==n||t.isFunction(n)?this.unbind(e,n):this.undelegate(n,e,i)},t.fn.trigger=function(e,n){return"string"==typeof e&&(e=t.Event(e)),c(e),e.data=n,this.each(function(){"dispatchEvent"in this&&this.dispatchEvent(e)})},t.fn.triggerHandler=function(e,i){var r,o;return this.each(function(s,a){r=u("string"==typeof e?t.Event(e):e),r.data=i,r.target=a,t.each(n(a,e.type||e),function(t,e){return o=e.proxy(r),r.isImmediatePropagationStopped()?!1:void 0})}),o},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout change select keydown keypress keyup error".split(" ").forEach(function(e){t.fn[e]=function(t){return this.bind(e,t)}}),["focus","blur"].forEach(function(e){t.fn[e]=function(t){if(t)this.bind(e,t);else if(this.length)try{this.get(0)[e]()}catch(n){}return this}}),t.Event=function(t,e){var n=document.createEvent(h[t]||"Events"),i=!0;if(e)for(var r in e)"bubbles"==r?i=!!e[r]:n[r]=e[r];return n.initEvent(t,i,!0,null,null,null,null,null,null,null,null,null,null,null,null),n}}(Zepto),function(t){function e(t){var e=this.os={},n=this.browser={},i=t.match(/WebKit\/([\d.]+)/),r=t.match(/(Android)\s+([\d.]+)/),o=t.match(/(iPad).*OS\s([\d_]+)/),s=!o&&t.match(/(iPhone\sOS)\s([\d_]+)/),a=t.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),u=a&&t.match(/TouchPad/),c=t.match(/Kindle\/([\d.]+)/),d=t.match(/Silk\/([\d._]+)/),l=t.match(/(BlackBerry).*Version\/([\d.]+)/);(n.webkit=!!i)&&(n.version=i[1]),r&&(e.android=!0,e.version=r[2]),s&&(e.ios=e.iphone=!0,e.version=s[2].replace(/_/g,".")),o&&(e.ios=e.ipad=!0,e.version=o[2].replace(/_/g,".")),a&&(e.webos=!0,e.version=a[2]),u&&(e.touchpad=!0),l&&(e.blackberry=!0,e.version=l[2]),c&&(e.kindle=!0,e.version=c[1]),d&&(n.silk=!0,n.version=d[1]),!d&&e.android&&t.match(/Kindle Fire/)&&(n.silk=!0)}e.call(t,navigator.userAgent),t.__detect=e}(Zepto),function(t,e){function n(t){return t.toLowerCase()}function i(t){return r?r+t:n(t)}var r,o="",s={Webkit:"webkit",Moz:"",O:"o",ms:"MS"},a=window.document,u=a.createElement("div"),c=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,d={};t.each(s,function(t,i){return u.style[t+"TransitionProperty"]!==e?(o="-"+n(t)+"-",r=i,!1):void 0}),d[o+"transition-property"]=d[o+"transition-duration"]=d[o+"transition-timing-function"]=d[o+"animation-name"]=d[o+"animation-duration"]="",t.fx={off:r===e&&u.style.transitionProperty===e,cssPrefix:o,transitionEnd:i("TransitionEnd"),animationEnd:i("AnimationEnd")},t.fn.animate=function(e,n,i,r){return t.isObject(n)&&(i=n.easing,r=n.complete,n=n.duration),n&&(n/=1e3),this.anim(e,n,i,r)},t.fn.anim=function(n,i,r,s){var a,u,l,h={},p=this,f=t.fx.transitionEnd;if(i===e&&(i=.4),t.fx.off&&(i=0),"string"==typeof n)h[o+"animation-name"]=n,h[o+"animation-duration"]=i+"s",f=t.fx.animationEnd;else{for(u in n)c.test(u)?(a||(a=[]),a.push(u+"("+n[u]+")")):h[u]=n[u];a&&(h[o+"transform"]=a.join(" ")),!t.fx.off&&"object"==typeof n&&(h[o+"transition-property"]=Object.keys(n).join(", "),h[o+"transition-duration"]=i+"s",h[o+"transition-timing-function"]=r||"linear")}return l=function(e){if(e!==void 0){if(e.target!==e.currentTarget)return;t(e.target).unbind(f,arguments.callee)}t(this).css(d),s&&s.call(this)},i>0&&this.bind(f,l),setTimeout(function(){p.css(h),0>=i&&setTimeout(function(){p.each(function(){l.call(this)})},0)},0),this},u=null}(Zepto),function(t){function e(e,n,i){var r=t.Event(n);return t(e).trigger(r,i),!r.defaultPrevented}function n(t,n,i,r){return t.global?e(n||v,i,r):void 0}function i(e){e.global&&0===t.active++&&n(e,null,"ajaxStart")}function r(e){e.global&&!--t.active&&n(e,null,"ajaxStop")}function o(t,e){var i=e.context;return e.beforeSend.call(i,t,e)===!1||n(e,i,"ajaxBeforeSend",[t,e])===!1?!1:(n(e,i,"ajaxSend",[t,e]),void 0)}function s(t,e,i){var r=i.context,o="success";i.success.call(r,t,o,e),n(i,r,"ajaxSuccess",[e,i,t]),u(o,e,i)}function a(t,e,i,r){var o=r.context;r.error.call(o,i,e,t),n(r,o,"ajaxError",[i,r,t]),u(e,i,r)}function u(t,e,i){var o=i.context;i.complete.call(o,e,t),n(i,o,"ajaxComplete",[e,i]),r(i)}function c(){}function d(t){return t&&(t==S?"html":t==b?"json":x.test(t)?"script":E.test(t)&&"xml")||"text"}function l(t,e){return(t+"&"+e).replace(/[&?]{1,2}/,"?")}function h(e){g(e.data)&&(e.data=t.param(e.data)),e.data&&(!e.type||"GET"==e.type.toUpperCase())&&(e.url=l(e.url,e.data))}function p(e,n,i,r){var o=t.isArray(n);t.each(n,function(n,s){r&&(n=i?r:r+"["+(o?"":n)+"]"),!r&&o?e.add(s.name,s.value):(i?t.isArray(s):g(s))?p(e,s,i,n):e.add(n,s)})}var f,m,y=0,g=t.isObject,v=window.document,_=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,x=/^(?:text|application)\/javascript/i,E=/^(?:text|application)\/xml/i,b="application/json",S="text/html",w=/^\s*$/;t.active=0,t.ajaxJSONP=function(e){var n,i="jsonp"+ ++y,r=v.createElement("script"),o=function(){t(r).remove(),i in window&&(window[i]=c),u("abort",a,e)},a={abort:o};return e.error&&(r.onerror=function(){a.abort(),e.error()}),window[i]=function(o){clearTimeout(n),t(r).remove(),delete window[i],s(o,a,e)},h(e),r.src=e.url.replace(/=\?/,"="+i),t("head").append(r),e.timeout>0&&(n=setTimeout(function(){a.abort(),u("timeout",a,e)},e.timeout)),a},t.ajaxSettings={type:"GET",beforeSend:c,success:c,error:c,complete:c,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript",json:b,xml:"application/xml, text/xml",html:S,text:"text/plain"},crossDomain:!1,timeout:0},t.ajax=function(e){var n=t.extend({},e||{});
for(f in t.ajaxSettings)void 0===n[f]&&(n[f]=t.ajaxSettings[f]);i(n),n.crossDomain||(n.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(n.url)&&RegExp.$2!=window.location.host);var r=n.dataType,u=/=\?/.test(n.url);if("jsonp"==r||u)return u||(n.url=l(n.url,"callback=?")),t.ajaxJSONP(n);n.url||(n.url=""+window.location),h(n);var p,y=n.accepts[r],g={},v=/^([\w-]+:)\/\//.test(n.url)?RegExp.$1:window.location.protocol,_=t.ajaxSettings.xhr();n.crossDomain||(g["X-Requested-With"]="XMLHttpRequest"),y&&(g.Accept=y,y.indexOf(",")>-1&&(y=y.split(",",2)[0]),_.overrideMimeType&&_.overrideMimeType(y)),(n.contentType||n.data&&"GET"!=n.type.toUpperCase())&&(g["Content-Type"]=n.contentType||"application/x-www-form-urlencoded"),n.headers=t.extend(g,n.headers||{}),_.onreadystatechange=function(){if(4==_.readyState){clearTimeout(p);var t,e=!1;if(_.status>=200&&300>_.status||304==_.status||0==_.status&&"file:"==v){r=r||d(_.getResponseHeader("content-type")),t=_.responseText;try{"script"==r?(1,eval)(t):"xml"==r?t=_.responseXML:"json"==r&&(t=w.test(t)?null:JSON.parse(t))}catch(i){e=i}e?a(e,"parsererror",_,n):s(t,_,n)}else a(null,"error",_,n)}};var x="async"in n?n.async:!0;_.open(n.type,n.url,x);for(m in n.headers)_.setRequestHeader(m,n.headers[m]);return o(_,n)===!1?(_.abort(),!1):(n.timeout>0&&(p=setTimeout(function(){_.onreadystatechange=c,_.abort(),a(null,"timeout",_,n)},n.timeout)),_.send(n.data?n.data:null),_)},t.get=function(e,n){return t.ajax({url:e,success:n})},t.post=function(e,n,i,r){return t.isFunction(n)&&(r=r||i,i=n,n=null),t.ajax({type:"POST",url:e,data:n,success:i,dataType:r})},t.getJSON=function(e,n){return t.ajax({url:e,success:n,dataType:"json"})},t.fn.load=function(e,n){if(!this.length)return this;var i,r=this,o=e.split(/\s/);return o.length>1&&(e=o[0],i=o[1]),t.get(e,function(e){r.html(i?t(v.createElement("div")).html(e.replace(_,"")).find(i).html():e),n&&n.call(r)}),this};var A=encodeURIComponent;t.param=function(t,e){var n=[];return n.add=function(t,e){this.push(A(t)+"="+A(e))},p(n,t,e),n.join("&").replace("%20","+")}}(Zepto),function(t){t.fn.serializeArray=function(){var e,n=[];return t(Array.prototype.slice.call(this.get(0).elements)).each(function(){e=t(this);var i=e.attr("type");"fieldset"!=this.nodeName.toLowerCase()&&!this.disabled&&"submit"!=i&&"reset"!=i&&"button"!=i&&("radio"!=i&&"checkbox"!=i||this.checked)&&n.push({name:e.attr("name"),value:e.val()})}),n},t.fn.serialize=function(){var t=[];return this.serializeArray().forEach(function(e){t.push(encodeURIComponent(e.name)+"="+encodeURIComponent(e.value))}),t.join("&")},t.fn.submit=function(e){if(e)this.bind("submit",e);else if(this.length){var n=t.Event("submit");this.eq(0).trigger(n),n.defaultPrevented||this.get(0).submit()}return this}}(Zepto),function(t){function e(t){return"tagName"in t?t:t.parentNode}function n(t,e,n,i){var r=Math.abs(t-e),o=Math.abs(n-i);return r>=o?t-e>0?"Left":"Right":n-i>0?"Up":"Down"}function i(){s=null,a.last&&(a.el.trigger("longTap"),a={})}function r(){s&&clearTimeout(s),s=null}var o,s,a={},u=750;t(document).ready(function(){var c,d;t(document.body).bind("touchstart",function(n){c=Date.now(),d=c-(a.last||c),a.el=t(e(n.touches[0].target)),o&&clearTimeout(o),a.x1=n.touches[0].pageX,a.y1=n.touches[0].pageY,d>0&&250>=d&&(a.isDoubleTap=!0),a.last=c,s=setTimeout(i,u)}).bind("touchmove",function(t){r(),a.x2=t.touches[0].pageX,a.y2=t.touches[0].pageY}).bind("touchend",function(){r(),a.isDoubleTap?(a.el.trigger("doubleTap"),a={}):a.x2&&Math.abs(a.x1-a.x2)>30||a.y2&&Math.abs(a.y1-a.y2)>30?(a.el.trigger("swipe")&&a.el.trigger("swipe"+n(a.x1,a.x2,a.y1,a.y2)),a={}):"last"in a&&(a.el.trigger("tap"),o=setTimeout(function(){o=null,a.el.trigger("singleTap"),a={}},250))}).bind("touchcancel",function(){o&&clearTimeout(o),s&&clearTimeout(s),s=o=null,a={}})}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(e){t.fn[e]=function(t){return this.bind(e,t)}})}(Zepto),define("zepto",function(t){return function(){var e;return e||t.$}}(this)),function(){var t,e=this,n=e.Backbone,i=[],r=i.push,o=i.slice,s=i.splice;t="undefined"!=typeof exports?exports:e.Backbone={},t.VERSION="1.0.0";var a=e._;a||"undefined"==typeof require||(a=require("underscore")),t.$=e.jQuery||e.Zepto||e.ender||e.$,t.noConflict=function(){return e.Backbone=n,this},t.emulateHTTP=!1,t.emulateJSON=!1;var u=t.Events={on:function(t,e,n){if(!d(this,"on",t,[e,n])||!e)return this;this._events||(this._events={});var i=this._events[t]||(this._events[t]=[]);return i.push({callback:e,context:n,ctx:n||this}),this},once:function(t,e,n){if(!d(this,"once",t,[e,n])||!e)return this;var i=this,r=a.once(function(){i.off(t,r),e.apply(this,arguments)});return r._callback=e,this.on(t,r,n)},off:function(t,e,n){var i,r,o,s,u,c,l,h;if(!this._events||!d(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events={},this;for(s=t?[t]:a.keys(this._events),u=0,c=s.length;c>u;u++)if(t=s[u],o=this._events[t]){if(this._events[t]=i=[],e||n)for(l=0,h=o.length;h>l;l++)r=o[l],(e&&e!==r.callback&&e!==r.callback._callback||n&&n!==r.context)&&i.push(r);i.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=o.call(arguments,1);if(!d(this,"trigger",t,e))return this;var n=this._events[t],i=this._events.all;return n&&l(n,e),i&&l(i,arguments),this},stopListening:function(t,e,n){var i=this._listeners;if(!i)return this;var r=!e&&!n;"object"==typeof e&&(n=this),t&&((i={})[t._listenerId]=t);for(var o in i)i[o].off(e,n,this),r&&delete this._listeners[o];return this}},c=/\s+/,d=function(t,e,n,i){if(!n)return!0;if("object"==typeof n){for(var r in n)t[e].apply(t,[r,n[r]].concat(i));return!1}if(c.test(n)){for(var o=n.split(c),s=0,a=o.length;a>s;s++)t[e].apply(t,[o[s]].concat(i));return!1}return!0},l=function(t,e){var n,i=-1,r=t.length,o=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;r>++i;)(n=t[i]).callback.call(n.ctx);return;case 1:for(;r>++i;)(n=t[i]).callback.call(n.ctx,o);return;case 2:for(;r>++i;)(n=t[i]).callback.call(n.ctx,o,s);return;case 3:for(;r>++i;)(n=t[i]).callback.call(n.ctx,o,s,a);return;default:for(;r>++i;)(n=t[i]).callback.apply(n.ctx,e)}},h={listenTo:"on",listenToOnce:"once"};a.each(h,function(t,e){u[e]=function(e,n,i){var r=this._listeners||(this._listeners={}),o=e._listenerId||(e._listenerId=a.uniqueId("l"));return r[o]=e,"object"==typeof n&&(i=this),e[t](n,i,this),this}}),u.bind=u.on,u.unbind=u.off,a.extend(t,u);var p=t.Model=function(t,e){var n,i=t||{};e||(e={}),this.cid=a.uniqueId("c"),this.attributes={},a.extend(this,a.pick(e,f)),e.parse&&(i=this.parse(i,e)||{}),(n=a.result(this,"defaults"))&&(i=a.defaults({},i,n)),this.set(i,e),this.changed={},this.initialize.apply(this,arguments)},f=["url","urlRoot","collection"];a.extend(p.prototype,u,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return a.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return a.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,n){var i,r,o,s,u,c,d,l;if(null==t)return this;if("object"==typeof t?(r=t,n=e):(r={})[t]=e,n||(n={}),!this._validate(r,n))return!1;o=n.unset,u=n.silent,s=[],c=this._changing,this._changing=!0,c||(this._previousAttributes=a.clone(this.attributes),this.changed={}),l=this.attributes,d=this._previousAttributes,this.idAttribute in r&&(this.id=r[this.idAttribute]);for(i in r)e=r[i],a.isEqual(l[i],e)||s.push(i),a.isEqual(d[i],e)?delete this.changed[i]:this.changed[i]=e,o?delete l[i]:l[i]=e;if(!u){s.length&&(this._pending=!0);for(var h=0,p=s.length;p>h;h++)this.trigger("change:"+s[h],this,l[s[h]],n)}if(c)return this;if(!u)for(;this._pending;)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,a.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var n in this.attributes)e[n]=void 0;return this.set(e,a.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!a.isEmpty(this.changed):a.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?a.clone(this.changed):!1;var e,n=!1,i=this._changing?this._previousAttributes:this.attributes;for(var r in t)a.isEqual(i[r],e=t[r])||((n||(n={}))[r]=e);return n},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return a.clone(this._previousAttributes)},fetch:function(t){t=t?a.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=this,n=t.success;return t.success=function(i){return e.set(e.parse(i,t),t)?(n&&n(e,i,t),e.trigger("sync",e,i,t),void 0):!1},H(this,t),this.sync("read",this,t)},save:function(t,e,n){var i,r,o,s=this.attributes;if(null==t||"object"==typeof t?(i=t,n=e):(i={})[t]=e,!(!i||n&&n.wait||this.set(i,n)))return!1;if(n=a.extend({validate:!0},n),!this._validate(i,n))return!1;i&&n.wait&&(this.attributes=a.extend({},s,i)),void 0===n.parse&&(n.parse=!0);var u=this,c=n.success;return n.success=function(t){u.attributes=s;var e=u.parse(t,n);return n.wait&&(e=a.extend(i||{},e)),a.isObject(e)&&!u.set(e,n)?!1:(c&&c(u,t,n),u.trigger("sync",u,t,n),void 0)},H(this,n),r=this.isNew()?"create":n.patch?"patch":"update","patch"===r&&(n.attrs=i),o=this.sync(r,this,n),i&&n.wait&&(this.attributes=s),o},destroy:function(t){t=t?a.clone(t):{};var e=this,n=t.success,i=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(r){(t.wait||e.isNew())&&i(),n&&n(e,r,t),e.isNew()||e.trigger("sync",e,r,t)},this.isNew())return t.success(),!1;H(this,t);var r=this.sync("delete",this,t);return t.wait||i(),r},url:function(){var t=a.result(this,"urlRoot")||a.result(this.collection,"url")||D();return this.isNew()?t:t+("/"===t.charAt(t.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(t){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(t){return this._validate({},a.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=a.extend({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return n?(this.trigger("invalid",this,n,a.extend(e||{},{validationError:n})),!1):!0}});var m=["keys","values","pairs","invert","pick","omit"];a.each(m,function(t){p.prototype[t]=function(){var e=o.call(arguments);return e.unshift(this.attributes),a[t].apply(a,e)}});var y=t.Collection=function(t,e){e||(e={}),e.url&&(this.url=e.url),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,a.extend({silent:!0},e))},g={add:!0,remove:!0,merge:!0},v={add:!0,merge:!1,remove:!1};a.extend(y.prototype,u,{model:p,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return t.sync.apply(this,arguments)},add:function(t,e){return this.set(t,a.defaults(e||{},v))},remove:function(t,e){t=a.isArray(t)?t.slice():[t],e||(e={});var n,i,r,o;for(n=0,i=t.length;i>n;n++)o=this.get(t[n]),o&&(delete this._byId[o.id],delete this._byId[o.cid],r=this.indexOf(o),this.models.splice(r,1),this.length--,e.silent||(e.index=r,o.trigger("remove",o,this,e)),this._removeReference(o));return this},set:function(t,e){e=a.defaults(e||{},g),e.parse&&(t=this.parse(t,e)),a.isArray(t)||(t=t?[t]:[]);var n,i,o,u,c,d=e.at,l=this.comparator&&null==d&&e.sort!==!1,h=a.isString(this.comparator)?this.comparator:null,p=[],f=[],m={};for(n=0,i=t.length;i>n;n++)(o=this._prepareModel(t[n],e))&&((u=this.get(o))?(e.remove&&(m[u.cid]=!0),e.merge&&(u.set(o.attributes,e),l&&!c&&u.hasChanged(h)&&(c=!0))):e.add&&(p.push(o),o.on("all",this._onModelEvent,this),this._byId[o.cid]=o,null!=o.id&&(this._byId[o.id]=o)));if(e.remove){for(n=0,i=this.length;i>n;++n)m[(o=this.models[n]).cid]||f.push(o);f.length&&this.remove(f,e)}if(p.length&&(l&&(c=!0),this.length+=p.length,null!=d?s.apply(this.models,[d,0].concat(p)):r.apply(this.models,p)),c&&this.sort({silent:!0}),e.silent)return this;for(n=0,i=p.length;i>n;n++)(o=p[n]).trigger("add",o,this,e);return c&&this.trigger("sort",this,e),this},reset:function(t,e){e||(e={});for(var n=0,i=this.models.length;i>n;n++)this._removeReference(this.models[n]);return e.previousModels=this.models,this._reset(),this.add(t,a.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),this},push:function(t,e){return t=this._prepareModel(t,e),this.add(t,a.extend({at:this.length},e)),t},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return t=this._prepareModel(t,e),this.add(t,a.extend({at:0},e)),t},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(t,e){return this.models.slice(t,e)},get:function(t){return null==t?void 0:this._byId[null!=t.id?t.id:t.cid||t]},at:function(t){return this.models[t]},where:function(t,e){return a.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var n in t)if(t[n]!==e.get(n))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw Error("Cannot sort a set without a comparator");return t||(t={}),a.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(a.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},sortedIndex:function(t,e,n){e||(e=this.comparator);var i=a.isFunction(e)?e:function(t){return t.get(e)};return a.sortedIndex(this.models,t,i,n)},pluck:function(t){return a.invoke(this.models,"get",t)},fetch:function(t){t=t?a.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success,n=this;return t.success=function(i){var r=t.reset?"reset":"set";n[r](i,t),e&&e(n,i,t),n.trigger("sync",n,i,t)},H(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?a.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var n=this,i=e.success;return e.success=function(r){e.wait&&n.add(t,e),i&&i(t,r,e)},t.save(null,e),t},parse:function(t){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof p)return t.collection||(t.collection=this),t;e||(e={}),e.collection=this;var n=new this.model(t,e);return n._validate(t,e)?n:(this.trigger("invalid",this,t,e),!1)},_removeReference:function(t){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,i){("add"!==t&&"remove"!==t||n===this)&&("destroy"===t&&this.remove(e,i),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});var _=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];a.each(_,function(t){y.prototype[t]=function(){var e=o.call(arguments);return e.unshift(this.models),a[t].apply(a,e)}});var x=["groupBy","countBy","sortBy"];a.each(x,function(t){y.prototype[t]=function(e,n){var i=a.isFunction(e)?e:function(t){return t.get(e)};return a[t](this.models,i,n)}});var E=t.View=function(t){this.cid=a.uniqueId("view"),this._configure(t||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},b=/^(\S+)\s*(.*)$/,S=["model","collection","el","id","attributes","className","tagName","events"];a.extend(E.prototype,u,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,n){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=a.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var n=t[e];if(a.isFunction(n)||(n=this[t[e]]),n){var i=e.match(b),r=i[1],o=i[2];n=a.bind(n,this),r+=".delegateEvents"+this.cid,""===o?this.$el.on(r,n):this.$el.on(r,o,n)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(t){this.options&&(t=a.extend({},a.result(this,"options"),t)),a.extend(this,a.pick(t,S)),this.options=t},_ensureElement:function(){if(this.el)this.setElement(a.result(this,"el"),!1);else{var e=a.extend({},a.result(this,"attributes"));this.id&&(e.id=a.result(this,"id")),this.className&&(e["class"]=a.result(this,"className"));var n=t.$("<"+a.result(this,"tagName")+">").attr(e);this.setElement(n,!1)}}}),t.sync=function(e,n,i){var r=w[e];a.defaults(i||(i={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var o={type:r,dataType:"json"};if(i.url||(o.url=a.result(n,"url")||D()),null!=i.data||!n||"create"!==e&&"update"!==e&&"patch"!==e||(o.contentType="application/json",o.data=JSON.stringify(i.attrs||n.toJSON(i))),i.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{}),i.emulateHTTP&&("PUT"===r||"DELETE"===r||"PATCH"===r)){o.type="POST",i.emulateJSON&&(o.data._method=r);var s=i.beforeSend;i.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",r),s?s.apply(this,arguments):void 0}}"GET"===o.type||i.emulateJSON||(o.processData=!1),"PATCH"!==o.type||!window.ActiveXObject||window.external&&window.external.msActiveXFilteringEnabled||(o.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var u=i.xhr=t.ajax(a.extend(o,i));return n.trigger("request",n,u,i),u};var w={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var A=t.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},N=/\((.*?)\)/g,T=/(\(\?)?:\w+/g,L=/\*\w+/g,R=/[\-{}\[\]+?.,\\\^$|#\s]/g;a.extend(A.prototype,u,{initialize:function(){},route:function(e,n,i){a.isRegExp(e)||(e=this._routeToRegExp(e)),a.isFunction(n)&&(i=n,n=""),i||(i=this[n]);var r=this;return t.history.route(e,function(o){var s=r._extractParameters(e,o);i&&i.apply(r,s),r.trigger.apply(r,["route:"+n].concat(s)),r.trigger("route",n,s),t.history.trigger("route",r,n,s)}),this},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(this.routes){this.routes=a.result(this,"routes");for(var t,e=a.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(R,"\\$&").replace(N,"(?:$1)?").replace(T,function(t,e){return e?t:"([^/]+)"}).replace(L,"(.*?)"),RegExp("^"+t+"$")},_extractParameters:function(t,e){var n=t.exec(e).slice(1);return a.map(n,function(t){return t?decodeURIComponent(t):null})}});var O=t.History=function(){this.handlers=[],a.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},M=/^[#\/]|\s+$/g,I=/^\/+|\/+$/g,k=/msie [\w.]+/,C=/\/$/;O.started=!1,a.extend(O.prototype,u,{interval:50,getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=this.location.pathname;var n=this.root.replace(C,"");t.indexOf(n)||(t=t.substr(n.length))}else t=this.getHash();return t.replace(M,"")},start:function(e){if(O.started)throw Error("Backbone.history has already been started");O.started=!0,this.options=a.extend({},{root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var n=this.getFragment(),i=document.documentMode,r=k.exec(navigator.userAgent.toLowerCase())&&(!i||7>=i);this.root=("/"+this.root+"/").replace(I,"/"),r&&this._wantsHashChange&&(this.iframe=t.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(n)),this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=n;var o=this.location,s=o.pathname.replace(/[^\/]$/,"$&/")===this.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!s?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&s&&o.hash&&(this.fragment=this.getHash().replace(M,""),this.history.replaceState({},document.title,this.root+this.fragment+o.search)),this.options.silent?void 0:this.loadUrl())},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),O.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(){var t=this.getFragment();return t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t===this.fragment?!1:(this.iframe&&this.navigate(t),this.loadUrl()||this.loadUrl(this.getHash()),void 0)},loadUrl:function(t){var e=this.fragment=this.getFragment(t),n=a.any(this.handlers,function(t){return t.route.test(e)?(t.callback(e),!0):void 0});return n},navigate:function(t,e){if(!O.started)return!1;if(e&&e!==!0||(e={trigger:e}),t=this.getFragment(t||""),this.fragment!==t){this.fragment=t;var n=this.root+t;if(this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}e.trigger&&this.loadUrl(t)}},_updateHash:function(t,e,n){if(n){var i=t.href.replace(/(javascript:|#).*$/,"");t.replace(i+"#"+e)}else t.hash="#"+e}}),t.history=new O;var P=function(t,e){var n,i=this;n=t&&a.has(t,"constructor")?t.constructor:function(){return i.apply(this,arguments)},a.extend(n,i,e);var r=function(){this.constructor=n};return r.prototype=i.prototype,n.prototype=new r,t&&a.extend(n.prototype,t),n.__super__=i.prototype,n};p.extend=y.extend=A.extend=E.extend=O.extend=P;var D=function(){throw Error('A "url" property or function must be specified')},H=function(t,e){var n=e.error;e.error=function(i){n&&n(t,i,e),t.trigger("error",t,i,e)}}}.call(this),define("backbone",["underscore","zepto"],function(t){return function(){var e;return e||t.Backbone}}(this)),function(){define("event",["backbone"],function(t){var e;return e=_.clone(t.Events)})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};define("views/misc/app",["require","backbone","event"],function(t){var n,i,r;return i=t("backbone"),r=t("event"),n=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(){return $(window).resize(function(){return r.trigger("window:resized",$(this).height())}),r.on("info:selected",this.displayInfoInLoop,this),r.on("window:resized",this.resizeContent,this),r.on("station:selected",this.removeInfo,this),this.setElement($("#info")),this.resizeContent($(window).height())},n.prototype.displayUser=function(){return $("#search").val(this.user.get("station")),$("#search").blur()},n.prototype.resizeContent=function(t){return $("#content").css("height",t)},n.prototype.removeInfo=function(){return null!=this.intervalID&&clearInterval(this.intervalID),this.$el.html("")},n.prototype.displayInfoInLoop=function(t){var e,n=this;return e=t.get("origdest"),null!=this.intervalID&&clearInterval(this.intervalID),this.intervalID=setInterval(function(){var i,r;return i=t.getTimeremaining(),r=0!==i.hours()?""+i.hours()+":":"",n.$el.html("<i class='icon-resize-horizontal'></i> "+e+" "+r+i.minutes()+": "+i.seconds())},1e3)},n}(i.View)})}.call(this),function(){var t={};(function(t){t.VERSION="1.0.rc.1",t.helpers={},t.partials={},t.registerHelper=function(t,e,n){n&&(e.not=n),this.helpers[t]=e},t.registerPartial=function(t,e){this.partials[t]=e},t.registerHelper("helperMissing",function(t){if(2===arguments.length)return void 0;throw Error("Could not find property '"+t+"'")});var e=Object.prototype.toString,n="[object Function]";t.registerHelper("blockHelperMissing",function(i,r){var o=r.inverse||function(){},s=r.fn,a=e.call(i);return a===n&&(i=i.call(this)),i===!0?s(this):i===!1||null==i?o(this):"[object Array]"===a?i.length>0?t.helpers.each(i,r):o(this):s(i)}),t.K=function(){},t.createFrame=Object.create||function(e){t.K.prototype=e;var n=new t.K;return t.K.prototype=null,n},t.registerHelper("each",function(e,n){var i,r=n.fn,o=n.inverse,s="";if(n.data&&(i=t.createFrame(n.data)),e&&e.length>0)for(var a=0,u=e.length;u>a;a++)i&&(i.index=a),s+=r(e[a],{data:i});else s=o(this);return s}),t.registerHelper("if",function(i,r){var o=e.call(i);return o===n&&(i=i.call(this)),!i||t.Utils.isEmpty(i)?r.inverse(this):r.fn(this)}),t.registerHelper("unless",function(e,n){var i=n.fn,r=n.inverse;return n.fn=r,n.inverse=i,t.helpers["if"].call(this,e,n)}),t.registerHelper("with",function(t,e){return e.fn(t)}),t.registerHelper("log",function(e){t.log(e)})})(t);var e=function(){function t(){this.yy={}}var e={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,statements:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,inMustache:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,OPEN_PARTIAL:24,params:25,hash:26,DATA:27,param:28,STRING:29,INTEGER:30,BOOLEAN:31,hashSegments:32,hashSegment:33,ID:34,EQUALS:35,pathSegments:36,SEP:37,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"OPEN_PARTIAL",27:"DATA",29:"STRING",30:"INTEGER",31:"BOOLEAN",34:"ID",35:"EQUALS",37:"SEP"},productions_:[0,[3,2],[4,3],[4,1],[4,0],[6,1],[6,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,3],[13,4],[7,2],[17,3],[17,2],[17,2],[17,1],[17,1],[25,2],[25,1],[28,1],[28,1],[28,1],[28,1],[28,1],[26,1],[32,2],[32,1],[33,3],[33,3],[33,3],[33,3],[33,3],[21,1],[36,3],[36,1]],performAction:function(t,e,n,i,r,o){var s=o.length-1;switch(r){case 1:return o[s-1];case 2:this.$=new i.ProgramNode(o[s-2],o[s]);break;case 3:this.$=new i.ProgramNode(o[s]);break;case 4:this.$=new i.ProgramNode([]);break;case 5:this.$=[o[s]];break;case 6:o[s-1].push(o[s]),this.$=o[s-1];break;case 7:this.$=new i.BlockNode(o[s-2],o[s-1].inverse,o[s-1],o[s]);break;case 8:this.$=new i.BlockNode(o[s-2],o[s-1],o[s-1].inverse,o[s]);break;case 9:this.$=o[s];break;case 10:this.$=o[s];break;case 11:this.$=new i.ContentNode(o[s]);break;case 12:this.$=new i.CommentNode(o[s]);break;case 13:this.$=new i.MustacheNode(o[s-1][0],o[s-1][1]);break;case 14:this.$=new i.MustacheNode(o[s-1][0],o[s-1][1]);break;case 15:this.$=o[s-1];break;case 16:this.$=new i.MustacheNode(o[s-1][0],o[s-1][1]);break;case 17:this.$=new i.MustacheNode(o[s-1][0],o[s-1][1],!0);break;case 18:this.$=new i.PartialNode(o[s-1]);break;case 19:this.$=new i.PartialNode(o[s-2],o[s-1]);break;case 20:break;case 21:this.$=[[o[s-2]].concat(o[s-1]),o[s]];break;case 22:this.$=[[o[s-1]].concat(o[s]),null];break;case 23:this.$=[[o[s-1]],o[s]];break;case 24:this.$=[[o[s]],null];break;case 25:this.$=[[new i.DataNode(o[s])],null];break;case 26:o[s-1].push(o[s]),this.$=o[s-1];break;case 27:this.$=[o[s]];break;case 28:this.$=o[s];break;case 29:this.$=new i.StringNode(o[s]);break;case 30:this.$=new i.IntegerNode(o[s]);break;case 31:this.$=new i.BooleanNode(o[s]);break;case 32:this.$=new i.DataNode(o[s]);break;case 33:this.$=new i.HashNode(o[s]);break;case 34:o[s-1].push(o[s]),this.$=o[s-1];break;case 35:this.$=[o[s]];break;case 36:this.$=[o[s-2],o[s]];break;case 37:this.$=[o[s-2],new i.StringNode(o[s])];break;case 38:this.$=[o[s-2],new i.IntegerNode(o[s])];break;case 39:this.$=[o[s-2],new i.BooleanNode(o[s])];break;case 40:this.$=[o[s-2],new i.DataNode(o[s])];break;case 41:this.$=new i.IdNode(o[s]);break;case 42:o[s-2].push(o[s]),this.$=o[s-2];break;case 43:this.$=[o[s]]}},table:[{3:1,4:2,5:[2,4],6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],24:[1,15]},{1:[3]},{5:[1,16]},{5:[2,3],7:17,8:18,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,19],20:[2,3],22:[1,13],23:[1,14],24:[1,15]},{5:[2,5],14:[2,5],15:[2,5],16:[2,5],19:[2,5],20:[2,5],22:[2,5],23:[2,5],24:[2,5]},{4:20,6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],24:[1,15]},{4:21,6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],24:[1,15]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],24:[2,9]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],24:[2,10]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],24:[2,11]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],24:[2,12]},{17:22,21:23,27:[1,24],34:[1,26],36:25},{17:27,21:23,27:[1,24],34:[1,26],36:25},{17:28,21:23,27:[1,24],34:[1,26],36:25},{17:29,21:23,27:[1,24],34:[1,26],36:25},{21:30,34:[1,26],36:25},{1:[2,1]},{6:31,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],24:[1,15]},{5:[2,6],14:[2,6],15:[2,6],16:[2,6],19:[2,6],20:[2,6],22:[2,6],23:[2,6],24:[2,6]},{17:22,18:[1,32],21:23,27:[1,24],34:[1,26],36:25},{10:33,20:[1,34]},{10:35,20:[1,34]},{18:[1,36]},{18:[2,24],21:41,25:37,26:38,27:[1,45],28:39,29:[1,42],30:[1,43],31:[1,44],32:40,33:46,34:[1,47],36:25},{18:[2,25]},{18:[2,41],27:[2,41],29:[2,41],30:[2,41],31:[2,41],34:[2,41],37:[1,48]},{18:[2,43],27:[2,43],29:[2,43],30:[2,43],31:[2,43],34:[2,43],37:[2,43]},{18:[1,49]},{18:[1,50]},{18:[1,51]},{18:[1,52],21:53,34:[1,26],36:25},{5:[2,2],8:18,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,2],22:[1,13],23:[1,14],24:[1,15]},{14:[2,20],15:[2,20],16:[2,20],19:[2,20],22:[2,20],23:[2,20],24:[2,20]},{5:[2,7],14:[2,7],15:[2,7],16:[2,7],19:[2,7],20:[2,7],22:[2,7],23:[2,7],24:[2,7]},{21:54,34:[1,26],36:25},{5:[2,8],14:[2,8],15:[2,8],16:[2,8],19:[2,8],20:[2,8],22:[2,8],23:[2,8],24:[2,8]},{14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],24:[2,14]},{18:[2,22],21:41,26:55,27:[1,45],28:56,29:[1,42],30:[1,43],31:[1,44],32:40,33:46,34:[1,47],36:25},{18:[2,23]},{18:[2,27],27:[2,27],29:[2,27],30:[2,27],31:[2,27],34:[2,27]},{18:[2,33],33:57,34:[1,58]},{18:[2,28],27:[2,28],29:[2,28],30:[2,28],31:[2,28],34:[2,28]},{18:[2,29],27:[2,29],29:[2,29],30:[2,29],31:[2,29],34:[2,29]},{18:[2,30],27:[2,30],29:[2,30],30:[2,30],31:[2,30],34:[2,30]},{18:[2,31],27:[2,31],29:[2,31],30:[2,31],31:[2,31],34:[2,31]},{18:[2,32],27:[2,32],29:[2,32],30:[2,32],31:[2,32],34:[2,32]},{18:[2,35],34:[2,35]},{18:[2,43],27:[2,43],29:[2,43],30:[2,43],31:[2,43],34:[2,43],35:[1,59],37:[2,43]},{34:[1,60]},{14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],24:[2,13]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],24:[2,16]},{5:[2,17],14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],24:[2,17]},{5:[2,18],14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],24:[2,18]},{18:[1,61]},{18:[1,62]},{18:[2,21]},{18:[2,26],27:[2,26],29:[2,26],30:[2,26],31:[2,26],34:[2,26]},{18:[2,34],34:[2,34]},{35:[1,59]},{21:63,27:[1,67],29:[1,64],30:[1,65],31:[1,66],34:[1,26],36:25},{18:[2,42],27:[2,42],29:[2,42],30:[2,42],31:[2,42],34:[2,42],37:[2,42]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],24:[2,19]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],24:[2,15]},{18:[2,36],34:[2,36]},{18:[2,37],34:[2,37]},{18:[2,38],34:[2,38]},{18:[2,39],34:[2,39]},{18:[2,40],34:[2,40]}],defaultActions:{16:[2,1],24:[2,25],38:[2,23],55:[2,21]},parseError:function(t){throw Error(t)
},parse:function(t){function e(){var t;return t=n.lexer.lex()||1,"number"!=typeof t&&(t=n.symbols_[t]||t),t}var n=this,i=[0],r=[null],o=[],s=this.table,a="",u=0,c=0,d=0;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,this.lexer.yylloc===void 0&&(this.lexer.yylloc={});var l=this.lexer.yylloc;o.push(l);var h=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var p,f,m,y,g,v,_,x,E,b={};;){if(m=i[i.length-1],this.defaultActions[m]?y=this.defaultActions[m]:((null===p||p===void 0)&&(p=e()),y=s[m]&&s[m][p]),y===void 0||!y.length||!y[0]){var S="";if(!d){E=[];for(v in s[m])this.terminals_[v]&&v>2&&E.push("'"+this.terminals_[v]+"'");S=this.lexer.showPosition?"Parse error on line "+(u+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+E.join(", ")+", got '"+(this.terminals_[p]||p)+"'":"Parse error on line "+(u+1)+": Unexpected "+(1==p?"end of input":"'"+(this.terminals_[p]||p)+"'"),this.parseError(S,{text:this.lexer.match,token:this.terminals_[p]||p,line:this.lexer.yylineno,loc:l,expected:E})}}if(y[0]instanceof Array&&y.length>1)throw Error("Parse Error: multiple actions possible at state: "+m+", token: "+p);switch(y[0]){case 1:i.push(p),r.push(this.lexer.yytext),o.push(this.lexer.yylloc),i.push(y[1]),p=null,f?(p=f,f=null):(c=this.lexer.yyleng,a=this.lexer.yytext,u=this.lexer.yylineno,l=this.lexer.yylloc,d>0&&d--);break;case 2:if(_=this.productions_[y[1]][1],b.$=r[r.length-_],b._$={first_line:o[o.length-(_||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(_||1)].first_column,last_column:o[o.length-1].last_column},h&&(b._$.range=[o[o.length-(_||1)].range[0],o[o.length-1].range[1]]),g=this.performAction.call(b,a,c,u,this.yy,y[1],r,o),g!==void 0)return g;_&&(i=i.slice(0,2*-1*_),r=r.slice(0,-1*_),o=o.slice(0,-1*_)),i.push(this.productions_[y[1]][0]),r.push(b.$),o.push(b._$),x=s[i[i.length-2]][i[i.length-1]],i.push(x);break;case 3:return!0}}return!0}},n=function(){var t={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw Error(t);this.yy.parser.parseError(t,e)},setInput:function(t){return this._input=t,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t;var e=t.match(/(?:\r\n?|\n).*/g);return e?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,n=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e-1),this.offset-=e;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var r=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===i.length?this.yylloc.first_column:0)+i[i.length-n.length].length-n[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[r[0],r[0]+this.yyleng-e]),this},more:function(){return this._more=!0,this},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return 20>t.length&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var t,e,n,i,r;this._more||(this.yytext="",this.match="");for(var o=this._currentRules(),s=0;o.length>s&&(n=this._input.match(this.rules[o[s]]),!n||e&&!(n[0].length>e[0].length)||(e=n,i=s,this.options.flex));s++);return e?(r=e[0].match(/(?:\r\n?|\n).*/g),r&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],t=this.performAction.call(this,this.yy,this,o[i],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),t?t:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t!==void 0?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)}};return t.options={},t.performAction=function(t,e,n,i){switch(n){case 0:if("\\"!==e.yytext.slice(-1)&&this.begin("mu"),"\\"===e.yytext.slice(-1)&&(e.yytext=e.yytext.substr(0,e.yyleng-1),this.begin("emu")),e.yytext)return 14;break;case 1:return 14;case 2:return"\\"!==e.yytext.slice(-1)&&this.popState(),"\\"===e.yytext.slice(-1)&&(e.yytext=e.yytext.substr(0,e.yyleng-1)),14;case 3:return 24;case 4:return 16;case 5:return 20;case 6:return 19;case 7:return 19;case 8:return 23;case 9:return 23;case 10:return e.yytext=e.yytext.substr(3,e.yyleng-5),this.popState(),15;case 11:return 22;case 12:return 35;case 13:return 34;case 14:return 34;case 15:return 37;case 16:break;case 17:return this.popState(),18;case 18:return this.popState(),18;case 19:return e.yytext=e.yytext.substr(1,e.yyleng-2).replace(/\\"/g,'"'),29;case 20:return e.yytext=e.yytext.substr(1,e.yyleng-2).replace(/\\"/g,'"'),29;case 21:return e.yytext=e.yytext.substr(1),27;case 22:return 31;case 23:return 31;case 24:return 30;case 25:return 34;case 26:return e.yytext=e.yytext.substr(1,e.yyleng-2),34;case 27:return"INVALID";case 28:return 5}},t.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|$)))/,/^(?:\{\{>)/,/^(?:\{\{#)/,/^(?:\{\{\/)/,/^(?:\{\{\^)/,/^(?:\{\{\s*else\b)/,/^(?:\{\{\{)/,/^(?:\{\{&)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{)/,/^(?:=)/,/^(?:\.(?=[} ]))/,/^(?:\.\.)/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}\}\})/,/^(?:\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@[a-zA-Z]+)/,/^(?:true(?=[}\s]))/,/^(?:false(?=[}\s]))/,/^(?:[0-9]+(?=[}\s]))/,/^(?:[a-zA-Z0-9_$-]+(?=[=}\s\/.]))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],t.conditions={mu:{rules:[3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28],inclusive:!1},emu:{rules:[2],inclusive:!1},INITIAL:{rules:[0,1,28],inclusive:!0}},t}();return e.lexer=n,t.prototype=e,e.Parser=t,new t}();t.Parser=e,t.parse=function(e){return t.Parser.yy=t.AST,t.Parser.parse(e)},t.print=function(e){return(new t.PrintVisitor).accept(e)},t.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(){}},t.log=function(e,n){t.logger.log(e,n)},function(){t.AST={},t.AST.ProgramNode=function(e,n){this.type="program",this.statements=e,n&&(this.inverse=new t.AST.ProgramNode(n))},t.AST.MustacheNode=function(t,e,n){this.type="mustache",this.escaped=!n,this.hash=e;var i=this.id=t[0],r=this.params=t.slice(1),o=this.eligibleHelper=i.isSimple;this.isHelper=o&&(r.length||e)},t.AST.PartialNode=function(t,e){this.type="partial",this.id=t,this.context=e};var e=function(e,n){if(e.original!==n.original)throw new t.Exception(e.original+" doesn't match "+n.original)};t.AST.BlockNode=function(t,n,i,r){e(t.id,r),this.type="block",this.mustache=t,this.program=n,this.inverse=i,this.inverse&&!this.program&&(this.isInverse=!0)},t.AST.ContentNode=function(t){this.type="content",this.string=t},t.AST.HashNode=function(t){this.type="hash",this.pairs=t},t.AST.IdNode=function(t){this.type="ID",this.original=t.join(".");for(var e=[],n=0,i=0,r=t.length;r>i;i++){var o=t[i];".."===o?n++:"."===o||"this"===o?this.isScoped=!0:e.push(o)}this.parts=e,this.string=e.join("."),this.depth=n,this.isSimple=1===t.length&&!this.isScoped&&0===n},t.AST.DataNode=function(t){this.type="DATA",this.id=t},t.AST.StringNode=function(t){this.type="STRING",this.string=t},t.AST.IntegerNode=function(t){this.type="INTEGER",this.integer=t},t.AST.BooleanNode=function(t){this.type="BOOLEAN",this.bool=t},t.AST.CommentNode=function(t){this.type="comment",this.comment=t}}(),t.Exception=function(){var t=Error.prototype.constructor.apply(this,arguments);for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);this.message=t.message},t.Exception.prototype=Error(),t.SafeString=function(t){this.string=t},t.SafeString.prototype.toString=function(){return""+this.string},function(){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},n=/[&<>"'`]/g,i=/[&<>"'`]/,r=function(t){return e[t]||"&amp;"};t.Utils={escapeExpression:function(e){return e instanceof t.SafeString?""+e:null==e||e===!1?"":i.test(e)?e.replace(n,r):e},isEmpty:function(t){return t===void 0?!0:null===t?!0:t===!1?!0:"[object Array]"===Object.prototype.toString.call(t)&&0===t.length?!0:!1}}}(),t.Compiler=function(){},t.JavaScriptCompiler=function(){},function(e,n){e.prototype={compiler:e,disassemble:function(){for(var t,e,n,i=this.opcodes,r=[],o=0,s=i.length;s>o;o++)if(t=i[o],"DECLARE"===t.opcode)r.push("DECLARE "+t.name+"="+t.value);else{e=[];for(var a=0;t.args.length>a;a++)n=t.args[a],"string"==typeof n&&(n='"'+n.replace("\n","\\n")+'"'),e.push(n);r.push(t.opcode+" "+e.join(" "))}return r.join("\n")},guid:0,compile:function(t,e){this.children=[],this.depths={list:[]},this.options=e;var n=this.options.knownHelpers;if(this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0},n)for(var i in n)this.options.knownHelpers[i]=n[i];return this.program(t)},accept:function(t){return this[t.type](t)},program:function(t){var e,n=t.statements;this.opcodes=[];for(var i=0,r=n.length;r>i;i++)e=n[i],this[e.type](e);return this.isSimple=1===r,this.depths.list=this.depths.list.sort(function(t,e){return t-e}),this},compileProgram:function(t){var e,n=(new this.compiler).compile(t,this.options),i=this.guid++;this.usePartial=this.usePartial||n.usePartial,this.children[i]=n;for(var r=0,o=n.depths.list.length;o>r;r++)e=n.depths.list[r],2>e||this.addDepth(e-1);return i},block:function(t){var e=t.mustache,n=t.program,i=t.inverse;n&&(n=this.compileProgram(n)),i&&(i=this.compileProgram(i));var r=this.classifyMustache(e);"helper"===r?this.helperMustache(e,n,i):"simple"===r?(this.simpleMustache(e),this.opcode("pushProgram",n),this.opcode("pushProgram",i),this.opcode("pushLiteral","{}"),this.opcode("blockValue")):(this.ambiguousMustache(e,n,i),this.opcode("pushProgram",n),this.opcode("pushProgram",i),this.opcode("pushLiteral","{}"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(t){var e,n,i=t.pairs;this.opcode("push","{}");for(var r=0,o=i.length;o>r;r++)e=i[r],n=e[1],this.accept(n),this.opcode("assignToHash",e[0])},partial:function(t){var e=t.id;this.usePartial=!0,t.context?this.ID(t.context):this.opcode("push","depth0"),this.opcode("invokePartial",e.original),this.opcode("append")},content:function(t){this.opcode("appendContent",t.string)},mustache:function(t){var e=this.options,n=this.classifyMustache(t);"simple"===n?this.simpleMustache(t):"helper"===n?this.helperMustache(t):this.ambiguousMustache(t),t.escaped&&!e.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ambiguousMustache:function(t,e,n){var i=t.id,r=i.parts[0];this.opcode("getContext",i.depth),this.opcode("pushProgram",e),this.opcode("pushProgram",n),this.opcode("invokeAmbiguous",r)},simpleMustache:function(t){var e=t.id;"DATA"===e.type?this.DATA(e):e.parts.length?this.ID(e):(this.addDepth(e.depth),this.opcode("getContext",e.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperMustache:function(t,e,n){var i=this.setupFullMustacheParams(t,e,n),r=t.id.parts[0];if(this.options.knownHelpers[r])this.opcode("invokeKnownHelper",i.length,r);else{if(this.knownHelpersOnly)throw Error("You specified knownHelpersOnly, but used the unknown helper "+r);this.opcode("invokeHelper",i.length,r)}},ID:function(t){this.addDepth(t.depth),this.opcode("getContext",t.depth);var e=t.parts[0];e?this.opcode("lookupOnContext",t.parts[0]):this.opcode("pushContext");for(var n=1,i=t.parts.length;i>n;n++)this.opcode("lookup",t.parts[n])},DATA:function(t){this.options.data=!0,this.opcode("lookupData",t.id)},STRING:function(t){this.opcode("pushString",t.string)},INTEGER:function(t){this.opcode("pushLiteral",t.integer)},BOOLEAN:function(t){this.opcode("pushLiteral",t.bool)},comment:function(){},opcode:function(t){this.opcodes.push({opcode:t,args:[].slice.call(arguments,1)})},declare:function(t,e){this.opcodes.push({opcode:"DECLARE",name:t,value:e})},addDepth:function(t){if(isNaN(t))throw Error("EWOT");0!==t&&(this.depths[t]||(this.depths[t]=!0,this.depths.list.push(t)))},classifyMustache:function(t){var e=t.isHelper,n=t.eligibleHelper,i=this.options;if(n&&!e){var r=t.id.parts[0];i.knownHelpers[r]?e=!0:i.knownHelpersOnly&&(n=!1)}return e?"helper":n?"ambiguous":"simple"},pushParams:function(t){for(var e,n=t.length;n--;)e=t[n],this.options.stringParams?(e.depth&&this.addDepth(e.depth),this.opcode("getContext",e.depth||0),this.opcode("pushStringParam",e.string)):this[e.type](e)},setupMustacheParams:function(t){var e=t.params;return this.pushParams(e),t.hash?this.hash(t.hash):this.opcode("pushLiteral","{}"),e},setupFullMustacheParams:function(t,e,n){var i=t.params;return this.pushParams(i),this.opcode("pushProgram",e),this.opcode("pushProgram",n),t.hash?this.hash(t.hash):this.opcode("pushLiteral","{}"),i}};var i=function(t){this.value=t};n.prototype={nameLookup:function(t,e){return/^[0-9]+$/.test(e)?t+"["+e+"]":n.isValidJavaScriptVariableName(e)?t+"."+e:t+"['"+e+"']"},appendToBuffer:function(t){return this.environment.isSimple?"return "+t+";":"buffer += "+t+";"},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(e,n,i,r){this.environment=e,this.options=n||{},t.log(t.logger.DEBUG,this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!i,this.context=i||{programs:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.compileStack=[],this.compileChildren(e,n);var o,s=e.opcodes;for(this.i=0,a=s.length;a>this.i;this.i++)o=s[this.i],"DECLARE"===o.opcode?this[o.name]=o.value:this[o.opcode].apply(this,o.args);return this.createFunctionContext(r)},nextOpcode:function(){var t=this.environment.opcodes;return t[this.i+1],t[this.i+1]},eat:function(){this.i=this.i+1},preamble:function(){var t=[];if(this.isChild)t.push("");else{var e=this.namespace,n="helpers = helpers || "+e+".helpers;";this.environment.usePartial&&(n=n+" partials = partials || "+e+".partials;"),this.options.data&&(n+=" data = data || {};"),t.push(n)}this.environment.isSimple?t.push(""):t.push(", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=t},createFunctionContext:function(e){var n=this.stackVars.concat(this.registers.list);if(n.length>0&&(this.source[1]=this.source[1]+", "+n.join(", ")),!this.isChild)for(var i in this.context.aliases)this.source[1]=this.source[1]+", "+i+"="+this.context.aliases[i];this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.source.push("return buffer;");for(var r=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"],o=0,s=this.environment.depths.list.length;s>o;o++)r.push("depth"+this.environment.depths.list[o]);if(e)return r.push(this.source.join("\n  ")),Function.apply(this,r);var a="function "+(this.name||"")+"("+r.join(",")+") {\n  "+this.source.join("\n  ")+"}";return t.log(t.logger.DEBUG,a+"\n\n"),a},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var t=["depth0"];this.setupParams(0,t),this.replaceStack(function(e){return t.splice(1,0,e),e+" = blockHelperMissing.call("+t.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var t=["depth0"];this.setupParams(0,t);var e=this.topStack();t.splice(1,0,e),this.source.push("if (!"+this.lastHelper+") { "+e+" = blockHelperMissing.call("+t.join(", ")+"); }")},appendContent:function(t){this.source.push(this.appendToBuffer(this.quotedString(t)))},append:function(){var t=this.popStack();this.source.push("if("+t+" || "+t+" === 0) { "+this.appendToBuffer(t)+" }"),this.environment.isSimple&&this.source.push("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){var t=this.nextOpcode(),e="";this.context.aliases.escapeExpression="this.escapeExpression",t&&"appendContent"===t.opcode&&(e=" + "+this.quotedString(t.args[0]),this.eat(t)),this.source.push(this.appendToBuffer("escapeExpression("+this.popStack()+")"+e))},getContext:function(t){this.lastContext!==t&&(this.lastContext=t)},lookupOnContext:function(t){this.pushStack(this.nameLookup("depth"+this.lastContext,t,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack(function(t){return"typeof "+t+" === functionType ? "+t+"() : "+t})},lookup:function(t){this.replaceStack(function(e){return e+" == null || "+e+" === false ? "+e+" : "+this.nameLookup(e,t,"context")})},lookupData:function(t){this.pushStack(this.nameLookup("data",t,"data"))},pushStringParam:function(t){this.pushStackLiteral("depth"+this.lastContext),this.pushString(t)},pushString:function(t){this.pushStackLiteral(this.quotedString(t))},push:function(t){this.pushStack(t)},pushLiteral:function(t){this.pushStackLiteral(t)},pushProgram:function(t){null!=t?this.pushStackLiteral(this.programExpression(t)):this.pushStackLiteral(null)},invokeHelper:function(t,e){this.context.aliases.helperMissing="helpers.helperMissing";var n=this.lastHelper=this.setupHelper(t,e);this.register("foundHelper",n.name),this.pushStack("foundHelper ? foundHelper.call("+n.callParams+") "+": helperMissing.call("+n.helperMissingParams+")")},invokeKnownHelper:function(t,e){var n=this.setupHelper(t,e);this.pushStack(n.name+".call("+n.callParams+")")},invokeAmbiguous:function(t){this.context.aliases.functionType='"function"',this.pushStackLiteral("{}");var e=this.setupHelper(0,t),n=this.lastHelper=this.nameLookup("helpers",t,"helper");this.register("foundHelper",n);var i=this.nameLookup("depth"+this.lastContext,t,"context"),r=this.nextStack();this.source.push("if (foundHelper) { "+r+" = foundHelper.call("+e.callParams+"); }"),this.source.push("else { "+r+" = "+i+"; "+r+" = typeof "+r+" === functionType ? "+r+"() : "+r+"; }")},invokePartial:function(t){var e=[this.nameLookup("partials",t,"partial"),"'"+t+"'",this.popStack(),"helpers","partials"];this.options.data&&e.push("data"),this.context.aliases.self="this",this.pushStack("self.invokePartial("+e.join(", ")+");")},assignToHash:function(t){var e=this.popStack(),n=this.topStack();this.source.push(n+"['"+t+"'] = "+e+";")},compiler:n,compileChildren:function(t,e){for(var n,i,r=t.children,o=0,s=r.length;s>o;o++){n=r[o],i=new this.compiler,this.context.programs.push("");var a=this.context.programs.length;n.index=a,n.name="program"+a,this.context.programs[a]=i.compile(n,e,this.context)}},programExpression:function(t){if(this.context.aliases.self="this",null==t)return"self.noop";for(var e,n=this.environment.children[t],i=n.depths.list,r=[n.index,n.name,"data"],o=0,s=i.length;s>o;o++)e=i[o],1===e?r.push("depth0"):r.push("depth"+(e-1));return 0===i.length?"self.program("+r.join(", ")+")":(r.shift(),"self.programWithDepth("+r.join(", ")+")")},register:function(t,e){this.useRegister(t),this.source.push(t+" = "+e+";")},useRegister:function(t){this.registers[t]||(this.registers[t]=!0,this.registers.list.push(t))},pushStackLiteral:function(t){return this.compileStack.push(new i(t)),t},pushStack:function(t){return this.source.push(this.incrStack()+" = "+t+";"),this.compileStack.push("stack"+this.stackSlot),"stack"+this.stackSlot},replaceStack:function(t){var e=t.call(this,this.topStack());return this.source.push(this.topStack()+" = "+e+";"),"stack"+this.stackSlot},nextStack:function(){var t=this.incrStack();return this.compileStack.push("stack"+this.stackSlot),t},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),"stack"+this.stackSlot},popStack:function(){var t=this.compileStack.pop();return t instanceof i?t.value:(this.stackSlot--,t)},topStack:function(){var t=this.compileStack[this.compileStack.length-1];return t instanceof i?t.value:t},quotedString:function(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r")+'"'},setupHelper:function(t,e){var n=[];this.setupParams(t,n);var i=this.nameLookup("helpers",e,"helper");return{params:n,name:i,callParams:["depth0"].concat(n).join(", "),helperMissingParams:["depth0",this.quotedString(e)].concat(n).join(", ")}},setupParams:function(t,e){var n,i,r,o=[],s=[];o.push("hash:"+this.popStack()),i=this.popStack(),r=this.popStack(),(r||i)&&(r||(this.context.aliases.self="this",r="self.noop"),i||(this.context.aliases.self="this",i="self.noop"),o.push("inverse:"+i),o.push("fn:"+r));for(var a=0;t>a;a++)n=this.popStack(),e.push(n),this.options.stringParams&&s.push(this.popStack());return this.options.stringParams&&o.push("contexts:["+s.join(",")+"]"),this.options.data&&o.push("data:data"),e.push("{"+o.join(",")+"}"),e.join(", ")}};for(var r="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),o=n.RESERVED_WORDS={},s=0,a=r.length;a>s;s++)o[r[s]]=!0;n.isValidJavaScriptVariableName=function(t){return!n.RESERVED_WORDS[t]&&/^[a-zA-Z_$][0-9a-zA-Z_$]+$/.test(t)?!0:!1}}(t.Compiler,t.JavaScriptCompiler),t.precompile=function(e,n){n=n||{};var i=t.parse(e),r=(new t.Compiler).compile(i,n);return(new t.JavaScriptCompiler).compile(r,n)},t.compile=function(e,n){function i(){var i=t.parse(e),r=(new t.Compiler).compile(i,n),o=(new t.JavaScriptCompiler).compile(r,n,void 0,!0);return t.template(o)}n=n||{};var r;return function(t,e){return r||(r=i()),r.call(this,t,e)}},t.VM={template:function(e){var n={escapeExpression:t.Utils.escapeExpression,invokePartial:t.VM.invokePartial,programs:[],program:function(e,n,i){var r=this.programs[e];return i?t.VM.program(n,i):r?r:r=this.programs[e]=t.VM.program(n)},programWithDepth:t.VM.programWithDepth,noop:t.VM.noop};return function(i,r){return r=r||{},e.call(n,t,i,r.helpers,r.partials,r.data)}},programWithDepth:function(t,e){var n=Array.prototype.slice.call(arguments,2);return function(i,r){return r=r||{},t.apply(this,[i,r.data||e].concat(n))}},program:function(t,e){return function(n,i){return i=i||{},t(n,i.data||e)}},noop:function(){return""},invokePartial:function(e,n,i,r,o,s){var a={helpers:r,partials:o,data:s};if(void 0===e)throw new t.Exception("The partial "+n+" could not be found");if(e instanceof Function)return e(i,a);if(t.compile)return o[n]=t.compile(e,{data:void 0!==s}),o[n](i,a);throw new t.Exception("The partial "+n+" could not be compiled when running in runtime-only mode")}},t.template=t.VM.template,define("handlebars",[],function(){return t})}(),define("i18nprecompile",["handlebars","underscore"],function(t,e){function n(i,r,o){return o=o||{},r=r||{},i&&"program"===i.type&&i.statements&&(e(i.statements).forEach(function(e,s){var a="<!-- i18n error -->";if("mustache"==e.type&&e.id&&"$"==e.id.original){if(e.params.length&&e.params[0].string){var u=e.params[0].string;a=r[u]||(o.originalKeyFallback?u:a)}i.statements[s]=new t.AST.ContentNode(a)}else e.program&&(e.program=n(e.program,r,o))}),i.inverse&&n(i.inverse,r,o)),i}return function(e,i,r){r=r||{};var o,s;return o=t.parse(e),i!==!1&&(o=n(o,i,r)),s=(new t.Compiler).compile(o,r),(new t.JavaScriptCompiler).compile(s,r)}}),function(window){var JSON=window.JSON||{};(function(){function f(t){return 10>t?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var n,i,r,o,s,a=gap,u=e[t];switch(u&&"object"==typeof u&&"function"==typeof u.toJSON&&(u=u.toJSON(t)),"function"==typeof rep&&(u=rep.call(e,t,u)),typeof u){case"string":return quote(u);case"number":return isFinite(u)?u+"":"null";case"boolean":case"null":return u+"";case"object":if(!u)return"null";if(gap+=indent,s=[],"[object Array]"===Object.prototype.toString.apply(u)){for(o=u.length,n=0;o>n;n+=1)s[n]=str(n,u)||"null";return r=0===s.length?"[]":gap?"[\n"+gap+s.join(",\n"+gap)+"\n"+a+"]":"["+s.join(",")+"]",gap=a,r}if(rep&&"object"==typeof rep)for(o=rep.length,n=0;o>n;n+=1)"string"==typeof rep[n]&&(i=rep[n],r=str(i,u),r&&s.push(quote(i)+(gap?": ":":")+r));else for(i in u)Object.prototype.hasOwnProperty.call(u,i)&&(r=str(i,u),r&&s.push(quote(i)+(gap?": ":":")+r));return r=0===s.length?"{}":gap?"{\n"+gap+s.join(",\n"+gap)+"\n"+a+"}":"{"+s.join(",")+"}",gap=a,r}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,n){var i;if(gap="",indent="","number"==typeof n)for(i=0;n>i;i+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(t,e){var n,i,r=t[e];if(r&&"object"==typeof r)for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i=walk(r,n),void 0!==i?r[n]=i:delete r[n]);return reviver.call(t,e,r)}var j;if(text+="",cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})})(),define("json2",[],function(){return JSON})}.call(this,this),define("hbs",["handlebars","underscore","i18nprecompile","json2"],function(t,e,n,i){var r,o,s=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],a=function(){throw Error("Environment unsupported.")},u=[],c="w+",d="hbs",l="@hbs",h="/styles/",p="/demo-build/styles/",f="template/helpers/",m="template/i18n/",y="screen.build.css";"undefined"!=typeof window&&window.navigator&&window.document&&!window.navigator.userAgent.match(/Node.js/)?(o=function(){var t,e,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;for(e=0;3>e;e++){n=s[e];try{t=new ActiveXObject(n)}catch(i){}if(t){s=[n];break}}if(!t)throw Error("getXhr(): XMLHttpRequest not available");return t},a=function(t,e){var n=o();n.open("GET",t,!0),n.onreadystatechange=function(){4===n.readyState&&e(n.responseText)},n.send(null)}):"undefined"!=typeof process&&process.versions&&process.versions.node?(r=require.nodeRequire("fs"),a=function(t,e){var n=r.readFileSync(t,"utf8")||"";n=n.replace(/^\uFEFF/,""),e(n)}):"undefined"!=typeof java&&java.io!==void 0&&(a=function(t,e){for(var n,i=new java.io.File(t),r=new java.io.FileReader(i),o=new java.io.BufferedReader(r),s="";null!==(n=o.readLine());)s+=new String(n)+"\n";o.close(),e(s)});var g={},v=function(t,e){g[t]?e(g[t]):a(t,function(n){g[t]=n,e.call(this,n)})},_=[],x={};return{get:function(){return t},write:function(t,e,n){if(e+l in u){var i=u[e+l];n.asModule(t+"!"+e,i)}},version:"0.4.0",load:function(o,s,g,E){function b(t,n){return e(t).forEach(function(t){t&&t.type&&"partial"===t.type&&n.push(t.id.string),t&&t.program&&t.program.statements&&b(t.program.statements,n),t&&t.program&&t.program.inverse&&t.program.inverse.statements&&b(t.program.inverse.statements,n)}),n}function S(t){var n=[];return t&&t.statements&&(n=b(t.statements,[])),e(n).unique()}function w(t){var e,n,r;if(t&&t.statements&&(e=t.statements[0],e&&"comment"===e.type))try{return n=e.comment.replace(RegExp("^[\\s]+|[\\s]+$","g"),""),r=i.parse(n),n}catch(o){return"{}"}return"{}"}function A(t){if(!t)return[];var e,n=[t[0]],i=t[0];for(e=1;t.length>e;++e)t.hasOwnProperty(e)&&(i+="."+t[e],n.push(i));return n}function N(t,n,i,r){i=i?i+".":"";var o="";return e(t).forEach(function(t){var s,a,u;if(t&&t.type&&"mustache"===t.type){if(!t.params||!t.params.length){s=A(t.id.parts);for(a in s)s[a]&&(o=s[a]||o,n.push(i+s[a]));n.push(i+t.id.string)}var c=["this",".","..","./..","../..","../../.."];t.params&&e(t.params).forEach(function(a){e(c).contains(a.original)&&r.push(t.id.string),s=A(a.parts);for(var u in s)s[u]&&(o=s[u]||o,r.push(t.id.string),n.push(i+s[u]))})}t&&t.mustache&&N([t.mustache],n,i+o,r),t&&t.program&&t.program.statements&&(u=N([t.mustache],[],"",r)[0]||"",t.program.inverse&&t.program.inverse.statements&&N(t.program.inverse.statements,n,i+o+(u?i+o?"."+u:u:""),r),N(t.program.statements,n,i+o+(u?i+o?"."+u:u:""),r))}),n}function T(t){var n=[],i=[];t&&t.statements&&(n=N(t.statements,[],void 0,i));var r=["helperMissing","blockHelperMissing","each","if","unless","with"];return{vars:e(n).chain().unique().map(function(t){return""===t?".":t.length&&"."===t[t.length-1]?t.substr(0,t.length-1)+"[]":t}).value(),helpers:e(i).chain().unique().map(function(t){return e(r).contains(t)?void 0:t}).compact().value()}}function L(d){a(M,function(a){var l,m,v,b=t.parse(a),A=S(b),N=w(b),L=T(b),I=L.vars,k=L.helpers||[],C=A.join("', 'hbs!").replace(/_/g,"/"),P=E.hbs&&E.hbs.disableHelpers?"":function(){var t,e=[],n=E.hbs&&E.hbs.helperPathCallback?E.hbs.helperPathCallback:function(t){return(E.hbs&&E.hbs.helperDirectory?E.hbs.helperDirectory:f)+t};for(t=0;k.length>t;t++)e[t]="'"+n(k[t])+"'";return e}().join(","),D="",H="",U="";if(C&&(C=",'hbs!"+C+"'"),P&&(P=","+P),"{}"!==N)try{l=i.parse(N),l&&l.styles&&(_=e.union(_,l.styles),require.isBrowser&&!E.isBuild?(m=document.head||document.getElementsByTagName("head")[0],e(l.styles).forEach(function(t){x[t]||(v=document.createElement("link"),v.href=E.baseUrl+h+t+".css",v.media="all",v.rel="stylesheet",v.type="text/css",m.appendChild(v),x[t]=v)})):E.isBuild&&function(){var t=require.nodeRequire("fs"),n=e(l.styles).map(function(t){return x[t]?"":(x[t]=!0,"@import url("+t+".css);\n")
}).join("\n");t.open(__dirname+p+y,c,"0666",function(e,i){t.writeSync(i,n,null,encoding="utf8"),t.close(i)}),c="a"}())}catch(j){console.log("error injecting styles")}E.isBuild||E.serverRender||(D="<!-- START - "+o+" -->",H="<!-- END - "+o+" -->",U="t.meta = "+N+";\n"+"t.helpers = "+i.stringify(k)+";\n"+"t.deps = "+i.stringify(A)+";\n"+"t.vars = "+i.stringify(I)+";\n");var V=O?!1:e.extend(d,E.localeMapping),B=n(a,V,{originalKeyFallback:(E.hbs||{}).originalKeyFallback});a="/* START_TEMPLATE */\ndefine(['hbs','handlebars'"+C+P+"], function( hbs, Handlebars ){ \n"+"var t = Handlebars.template("+B+");\n"+"Handlebars.registerPartial('"+o.replace(/\//g,"_")+"', t);\n"+U+"return t;\n"+"});\n"+"/* END_TEMPLATE */\n",E.isBuild&&(u[R]=a),E.isBuild||(a+="\r\n//@ sourceURL="+M);for(var $ in A)A.hasOwnProperty($)&&(A[$]="hbs!"+A[$].replace(/_/g,"/"));E.isBuild?(g.fromText(a),s([o],function(t){g(t)})):require(A,function(){g.fromText(a),s([o],function(t){g(t)})}),E.removeCombined&&r.unlinkSync(M)})}var R=o+l,O=E.hbs&&E.hbs.disableI18n,M=s.toUrl(o+"."+(E.hbs&&E.hbs.templateExtension?E.hbs.templateExtension:d));O?L(!1):v(s.toUrl((E.hbs&&E.hbs.i18nDirectory?E.hbs.i18nDirectory:m)+(E.locale||"en_us")+".json"),function(t){L(i.parse(t))})}}}),define("hbs!template/station/main",["hbs","handlebars"],function(t,e){var n=e.template(function(t,e,n){return n=n||t.helpers,'<button class="btn btn-primary btn-mini" id="fullscreen"><i class="icon-resize-full icon-white"></i></button>\n<div id="map"></div>\n<div id="stations"></div>'});return e.registerPartial("template_station_main",n),n}),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};define("models/StationModel",["require","backbone"],function(t){var n,i;return n=t("backbone"),i=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.defaults={x:0,y:0},n.prototype.getPosition=function(){return[this.get("x"),this.get("y")]},n.prototype.getNameToDisplay=function(){return""+this.get("name")},n}(n.Model)})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};define("collections/StationCollection",["require","backbone","models/StationModel"],function(t){var n,i,r;return n=t("backbone"),r=t("models/StationModel"),i=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.url="./stations",n.prototype.model=r,n.prototype.getSearchValues=function(){return this.map(function(t){return t.get("name")})},n.prototype.findPerName=function(t){var e,n;return e=t.toLowerCase(),n=this.filter(function(t){var n,i;return i=t.get("name").toLowerCase(),n=t.get("code_ddg").toLowerCase(),-1===i.indexOf(e)&&-1===n.indexOf(e)?!1:!0})},n}(n.Collection)})}.call(this),define("text",["module"],function(t){var e,n,i,r,o=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],s=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,a=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,u="undefined"!=typeof location&&location.href,c=u&&location.protocol&&location.protocol.replace(/\:/,""),d=u&&location.hostname,l=u&&(location.port||void 0),h=[],p=t.config&&t.config()||{};return e={version:"2.0.5+",strip:function(t){if(t){t=t.replace(s,"");var e=t.match(a);e&&(t=e[1])}else t="";return t},jsEscape:function(t){return t.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:p.createXhr||function(){var t,e,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(e=0;3>e;e+=1){n=o[e];try{t=new ActiveXObject(n)}catch(i){}if(t){o=[n];break}}return t},parseName:function(t){var e,n,i,r=!1,o=t.indexOf("."),s=0===t.indexOf("./")||0===t.indexOf("../");return-1!==o&&(!s||o>1)?(e=t.substring(0,o),n=t.substring(o+1,t.length)):e=t,i=n||e,o=i.indexOf("!"),-1!==o&&(r="strip"===i.substring(o+1),i=i.substring(0,o),n?n=i:e=i),{moduleName:e,ext:n,strip:r}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(t,n,i,r){var o,s,a,u=e.xdRegExp.exec(t);return u?(o=u[2],s=u[3],s=s.split(":"),a=s[1],s=s[0],!(o&&o!==n||s&&s.toLowerCase()!==i.toLowerCase()||(a||s)&&a!==r)):!0},finishLoad:function(t,n,i,r){i=n?e.strip(i):i,p.isBuild&&(h[t]=i),r(i)},load:function(t,n,i,r){if(r.isBuild&&!r.inlineText)return i(),void 0;p.isBuild=r.isBuild;var o=e.parseName(t),s=o.moduleName+(o.ext?"."+o.ext:""),a=n.toUrl(s),h=p.useXhr||e.useXhr;!u||h(a,c,d,l)?e.get(a,function(n){e.finishLoad(t,o.strip,n,i)},function(t){i.error&&i.error(t)}):n([s],function(t){e.finishLoad(o.moduleName+"."+o.ext,o.strip,t,i)})},write:function(t,n,i){if(h.hasOwnProperty(n)){var r=e.jsEscape(h[n]);i.asModule(t+"!"+n,"define(function () { return '"+r+"';});\n")}},writeFile:function(t,n,i,r,o){var s=e.parseName(n),a=s.ext?"."+s.ext:"",u=s.moduleName+a,c=i.toUrl(s.moduleName+a)+".js";e.load(u,i,function(){var n=function(t){return r(c,t)};n.asModule=function(t,e){return r.asModule(t,c,e)},e.write(t,u,n,o)},o)}},"node"===p.env||!p.env&&"undefined"!=typeof process&&process.versions&&process.versions.node?(n=require.nodeRequire("fs"),e.get=function(t,e){var i=n.readFileSync(t,"utf8");0===i.indexOf("﻿")&&(i=i.substring(1)),e(i)}):"xhr"===p.env||!p.env&&e.createXhr()?e.get=function(t,n,i,r){var o,s=e.createXhr();if(s.open("GET",t,!0),r)for(o in r)r.hasOwnProperty(o)&&s.setRequestHeader(o.toLowerCase(),r[o]);p.onXhr&&p.onXhr(s,t),s.onreadystatechange=function(){var e,r;4===s.readyState&&(e=s.status,e>399&&600>e?(r=Error(t+" HTTP status: "+e),r.xhr=s,i(r)):n(s.responseText))},s.send(null)}:"rhino"===p.env||!p.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?e.get=function(t,e){var n,i,r="utf-8",o=new java.io.File(t),s=java.lang.System.getProperty("line.separator"),a=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(o),r)),u="";try{for(n=new java.lang.StringBuffer,i=a.readLine(),i&&i.length()&&65279===i.charAt(0)&&(i=i.substring(1)),n.append(i);null!==(i=a.readLine());)n.append(s),n.append(i);u=""+n+""}finally{a.close()}e(u)}:("xpconnect"===p.env||!p.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(i=Components.classes,r=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),e.get=function(t,e){var n,o,s={},a=new FileUtils.File(t);try{n=i["@mozilla.org/network/file-input-stream;1"].createInstance(r.nsIFileInputStream),n.init(a,1,0,!1),o=i["@mozilla.org/intl/converter-input-stream;1"].createInstance(r.nsIConverterInputStream),o.init(n,"utf-8",n.available(),r.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),o.readString(n.available(),s),o.close(),n.close(),e(s.value)}catch(u){throw Error((a&&a.path||"")+": "+u)}}),e}),define("json",["text"],function(text){function cacheBust(t){return t=t.replace(CACHE_BUST_FLAG,""),t+=0>t.indexOf("?")?"?":"&",t+CACHE_BUST_QUERY_PARAM+"="+Math.round(2147483647*Math.random())}var CACHE_BUST_QUERY_PARAM="bust",CACHE_BUST_FLAG="!bust",jsonParse="undefined"!=typeof JSON&&"function"==typeof JSON.parse?JSON.parse:function(val){return eval("("+val+")")},buildMap={};return{load:function(t,e,n,i){!i.isBuild||i.inlineJSON!==!1&&-1===t.indexOf(CACHE_BUST_QUERY_PARAM+"=")?text.get(e.toUrl(t),function(e){i.isBuild?(buildMap[t]=e,n(e)):n(jsonParse(e))},n.error,{accept:"application/json"}):n(null)},normalize:function(t){return-1===t.indexOf(CACHE_BUST_FLAG)?t:cacheBust(t)},write:function(t,e,n){if(e in buildMap){var i=buildMap[e];n('define("'+t+"!"+e+'", function(){ return '+i+";});\n")}}}}),define("json!data/station.json",function(){return[{id:1,name:"ABBEVILLE",uid:"1",station_type:0,x:50.10197,y:1.82423,code_ddg:"ABB"},{id:5,name:"AGEN",uid:"8",station_type:0,x:44.20836,y:.62031,code_ddg:"AGN"},{id:7,name:"AILLY SUR SOMME",uid:"921",station_type:0,x:49.928351,y:2.200613,code_ddg:"AYS"},{id:8,name:"AIX CENTRE",uid:"9",station_type:0,x:43.52324,y:5.44411,code_ddg:"AXP"},{id:9,name:"AIX EN PROVENCE TGV",uid:"10",station_type:0,x:43.45516,y:5.31727,code_ddg:"AXV"},{id:10,name:"AIX LES BAINS LE REVARD",uid:"11",station_type:0,x:45.69079,y:5.9088,code_ddg:"AIX"},{id:11,name:"ALBENS",uid:"819",station_type:0,x:45.7859462,y:5.9455247,code_ddg:"ABN"},{id:12,name:"ALBERTVILLE",uid:"12",station_type:0,x:45.6734,y:6.38326,code_ddg:"ALV"},{id:13,name:"ALBI VILLE",uid:"820",station_type:0,x:43.9274238,y:2.1482549,code_ddg:"ALB"},{id:14,name:"ALENCON",uid:"821",station_type:0,x:48.4306517,y:.0836219,code_ddg:"ALN"},{id:15,name:"ALLASSAC",uid:"919",station_type:0,x:45.259075,y:1.473327,code_ddg:"AAA"},{id:17,name:"AMBERIEU",uid:"822",station_type:0,x:45.957781,y:5.3588286,code_ddg:"AMB"},{id:19,name:"AMIENS",uid:"13",station_type:0,x:49.88995,y:2.31039,code_ddg:"AMS"},{id:21,name:"ANGERS SAINT LAUD",uid:"15",station_type:0,x:47.46444,y:-.55694,code_ddg:"ASL"},{id:24,name:"ANNECY",uid:"17",station_type:0,x:45.9027,y:6.12248,code_ddg:"ANY"},{id:25,name:"ANNEMASSE",uid:"823",station_type:0,x:46.194181,y:6.2389698,code_ddg:"ANE"},{id:26,name:"ANTIBES",uid:"18",station_type:0,x:43.58588,y:7.11942,code_ddg:"ATB"},{id:32,name:"ARLES",uid:"22",station_type:0,x:43.68459,y:4.63214,code_ddg:"ARS"},{id:34,name:"ARRAS",uid:"24",station_type:0,x:50.28668,y:2.78195,code_ddg:"ARR"},{id:40,name:"AUCH",uid:"824",station_type:0,x:43.6476621,y:.5851595,code_ddg:"AUH"},{id:41,name:"AULNAT",uid:"930",station_type:0,x:45.791077,y:3.161733,code_ddg:"AUL"},{id:44,name:"AURAY",uid:"30",station_type:0,x:47.68019,y:-2.99999,code_ddg:"ARY"},{id:45,name:"AUREC",uid:"825",station_type:0,x:45.3687572,y:4.1984001,code_ddg:"AEC"},{id:46,name:"AURILLAC",uid:"920",station_type:0,x:44.921057,y:2.435532,code_ddg:"AUC"},{id:48,name:"AUXERRE",uid:"826",station_type:0,x:47.7982909,y:3.5744043,code_ddg:"AUX"},{id:54,name:"AVIGNON CENTRE",uid:"35",station_type:0,x:43.94117,y:4.80632,code_ddg:"AVI"},{id:55,name:"AVIGNON TGV",uid:"37",station_type:0,x:43.92184,y:4.7861,code_ddg:"COU"},{id:59,name:"AÉROPORT CDG ROISSY 2 TGV",uid:"6",station_type:0,x:49.00361,y:2.57103,code_ddg:"RYT"},{id:65,name:"BAR LE DUC",uid:"41",station_type:0,x:48.77319,y:5.16779,code_ddg:"BLD"},{id:66,name:"BAS MONISTROL",uid:"827",station_type:0,x:45.2908816,y:4.1481882,code_ddg:"BMO"},{id:68,name:"BAYONNE",uid:"42",station_type:0,x:43.49702,y:-1.47019,code_ddg:"BYE"},{id:71,name:"BEAUNE",uid:"828",station_type:0,x:47.0239813,y:4.8382698,code_ddg:"BEA"},{id:73,name:"BELFORT",uid:"44",station_type:0,x:47.63245,y:6.85393,code_ddg:"BFT"},{id:74,name:"BELFORT-MONTBELIARD TGV",uid:"931",station_type:0,x:47.581944,y:6.876944,code_ddg:"BFB"},{id:75,name:"BELLEGARDE",uid:"45",station_type:0,x:46.10967,y:5.82332,code_ddg:"BGD"},{id:79,name:"BESANCON",uid:"48",station_type:0,x:47.24711,y:6.02139,code_ddg:"BNV"},{id:80,name:"BESANCON TGV",uid:"932",station_type:0,x:47.241225,y:6.025565,code_ddg:"BFC"},{id:82,name:"BETHUNE",uid:"50",station_type:0,x:50.52071,y:2.64164,code_ddg:"BET"},{id:84,name:"BEZIERS",uid:"52",station_type:0,x:43.33623,y:3.21922,code_ddg:"BZS"},{id:85,name:"BIARRITZ",uid:"918",station_type:0,x:43.4831519,y:-1.558626,code_ddg:"BIZ"},{id:89,name:"BLOIS",uid:"56",station_type:0,x:47.58554,y:1.32353,code_ddg:"BLO"},{id:99,name:"BONNEVILLE",uid:"830",station_type:0,x:46.07792,y:6.416852,code_ddg:"BON"},{id:101,name:"BONS EN CHABLAIS",uid:"829",station_type:0,x:46.270053,y:6.366168,code_ddg:"BAB"},{id:103,name:"BORDEAUX",uid:"65",station_type:0,x:44.82593,y:-.55596,code_ddg:"BXJ"},{id:109,name:"BOULOGNE VILLE",uid:"70",station_type:0,x:50.71561,y:1.61033,code_ddg:"BEM"},{id:111,name:"BOURG EN BRESSE",uid:"72",station_type:0,x:46.20004,y:5.21485,code_ddg:"BGB"},{id:113,name:"BOURG SAINT MAURICE",uid:"74",station_type:0,x:45.61953,y:6.77146,code_ddg:"BSM"},{id:114,name:"BOURGES",uid:"75",station_type:0,x:47.09431,y:2.39486,code_ddg:"BGS"},{id:120,name:"BREST",uid:"79",station_type:0,x:48.38808,y:-4.47892,code_ddg:"BRT"},{id:127,name:"BRIANCON",uid:"831",station_type:0,x:44.889967,y:6.632603,code_ddg:"BRI"},{id:128,name:"BRIGNOUD",uid:"832",station_type:0,x:45.262565,y:5.90132,code_ddg:"BNU"},{id:130,name:"BRIVE",uid:"83",station_type:0,x:45.15263,y:1.52815,code_ddg:"BLG"},{id:142,name:"CAEN",uid:"90",station_type:0,x:49.17655,y:-.34826,code_ddg:"CAE"},{id:143,name:"CAHORS",uid:"91",station_type:0,x:44.44916,y:1.43325,code_ddg:"CAH"},{id:144,name:"CALAIS FRETHUN",uid:"92",station_type:0,x:50.90349,y:1.81008,code_ddg:"FHS"},{id:145,name:"CALAIS TAA",uid:"93",station_type:0,x:50.90349,y:1.81008,code_ddg:"CMM"},{id:146,name:"CALAIS VILLE",uid:"94",station_type:0,x:50.95343,y:1.85139,code_ddg:"CSV"},{id:147,name:"CANNES",uid:"95",station_type:0,x:43.55416,y:7.01862,code_ddg:"CAN"},{id:148,name:"CARCASSONNE",uid:"96",station_type:0,x:43.21818,y:2.3527,code_ddg:"CNE"},{id:150,name:"CASTELNAUDARY",uid:"833",station_type:0,x:43.312144,y:1.9502,code_ddg:"CTY"},{id:158,name:"CHABONS",uid:"834",station_type:0,x:45.438418,y:5.428038,code_ddg:"CKN"},{id:159,name:"CHALON SUR SAONE",uid:"102",station_type:0,x:46.77444,y:4.84322,code_ddg:"CSS"},{id:160,name:"CHALONS EN CHAMPAGNE",uid:"103",station_type:0,x:48.95551,y:4.34896,code_ddg:"CMP"},{id:162,name:"CHAMBERY-CHALLES LES EAUX",uid:"105",station_type:0,x:45.57093,y:5.92054,code_ddg:"CRL"},{id:165,name:"CHAMPAGNE ARDENNE TGV",uid:"107",station_type:0,x:49.21164,y:3.98879,code_ddg:"CGV"},{id:176,name:"CHARLEVILLE MEZIERE",uid:"117",station_type:0,x:49.76742,y:4.72485,code_ddg:"CMZ"},{id:178,name:"CHARTRES",uid:"119",station_type:0,x:48.44708,y:1.47903,code_ddg:"CHH"},{id:185,name:"CHATEAUROUX",uid:"121",station_type:0,x:46.80892,y:1.69859,code_ddg:"CTX"},{id:187,name:"CHATELLERAULT",uid:"122",station_type:0,x:46.81867,y:.54959,code_ddg:"CRT"},{id:188,name:"CHAUMONT",uid:"836",station_type:0,x:48.1097222,y:5.1344444,code_ddg:"CHM"},{id:204,name:"CHÂTEAU-THIERRY",uid:"835",station_type:0,x:49.038183,y:3.409548,code_ddg:"CTH"},{id:210,name:"CLERMONT FERRAND",uid:"134",station_type:0,x:45.77858,y:3.10053,code_ddg:"CLF"},{id:211,name:"CLERMONT-LA ROTONDE",uid:"858",station_type:0,x:45.767974,y:3.09062,code_ddg:"RTD"},{id:213,name:"CLISSON",uid:"837",station_type:0,x:47.085913,y:-1.286497,code_ddg:"CLI"},{id:215,name:"CLUSES",uid:"838",station_type:0,x:46.06141,y:6.582677,code_ddg:"CLU"},{id:217,name:"COLMAR",uid:"137",station_type:0,x:48.07315,y:7.34709,code_ddg:"CMR"},{id:220,name:"COMMENTRY",uid:"922",station_type:0,x:46.29512,y:2.739716,code_ddg:"CMY"},{id:222,name:"COMPIEGNE",uid:"140",station_type:0,x:49.42273,y:2.82445,code_ddg:"CPE"},{id:232,name:"COSNE SUR LOIRE",uid:"839",station_type:0,x:47.4340051,y:2.9743526,code_ddg:"COS"},{id:239,name:"CREIL*",uid:"152",station_type:0,x:49.2641,y:2.46907,code_ddg:"CLH"},{id:244,name:"CULOZ",uid:"840",station_type:0,x:45.84323,y:5.778685,code_ddg:"CUZ"},{id:247,name:"DAX",uid:"155",station_type:0,x:43.72081,y:-1.05051,code_ddg:"DAX"},{id:248,name:"DECIZE",uid:"841",station_type:0,x:46.8373784,y:3.469698,code_ddg:"DZE"},{id:251,name:"DIEPPE",uid:"842",station_type:0,x:49.9213889,y:1.0811111,code_ddg:"DEV"},{id:253,name:"DIJON VILLE",uid:"157",station_type:0,x:47.3232,y:5.02745,code_ddg:"DJV"},{id:254,name:"DOLE VILLE",uid:"158",station_type:0,x:47.09642,y:5.48797,code_ddg:"DLE"},{id:257,name:"DON SAINGHIN",uid:"843",station_type:0,x:50.551857,y:2.914283,code_ddg:"DON"},{id:259,name:"DOUAI",uid:"161",station_type:0,x:50.37195,y:3.09041,code_ddg:"DOI"},{id:263,name:"DREUX",uid:"844",station_type:0,x:48.731453,y:1.37051,code_ddg:"DRX"},{id:265,name:"DUNKERQUE",uid:"165",station_type:0,x:51.03021,y:2.3681,code_ddg:"DKQ"},{id:267,name:"ECHIROLLES",uid:"845",station_type:0,x:45.152787,y:5.719922,code_ddg:"EHR"},{id:273,name:"EPERNAY",uid:"170",station_type:0,x:49.04652,y:3.96022,code_ddg:"EPR"},{id:275,name:"EPINAL",uid:"171",station_type:0,x:48.17758,y:6.44141,code_ddg:"ELP"},{id:290,name:"ETAPLES LE TOUQUET",uid:"917",station_type:0,x:50.517411,y:1.626234,code_ddg:"ETA"},{id:293,name:"EVIAN",uid:"846",station_type:0,x:46.3183851,y:6.959878,code_ddg:"EVI"},{id:295,name:"EVREUX NORMANDIE",uid:"185",station_type:0,x:49.01856,y:1.14989,code_ddg:"EVX"},{id:309,name:"FORBACH",uid:"196",station_type:0,x:49.18948,y:6.90043,code_ddg:"FOB"},{id:311,name:"FRASNE",uid:"847",station_type:0,x:46.857714,y:6.157653,code_ddg:"FRA"},{id:313,name:"FROUARD",uid:"848",station_type:0,x:48.755684,y:6.144208,code_ddg:"FRD"},{id:315,name:"FUTUROSCOPE",uid:"199",station_type:0,x:46.67023,y:.37811,code_ddg:"FTU"},{id:319,name:"GANNAT",uid:"849",station_type:0,x:46.0986623,y:3.2030586,code_ddg:"GAN"},{id:321,name:"GAP",uid:"850",station_type:0,x:44.564,y:6.0855,code_ddg:"GAP"},{id:333,name:"GONCELIN",uid:"852",station_type:0,x:45.341938,y:5.974072,code_ddg:"GOC"},{id:336,name:"GRANVILLE",uid:"210",station_type:0,x:48.83884,y:-1.58678,code_ddg:"GRV"},{id:339,name:"GRENOBLE",uid:"212",station_type:0,x:45.19166,y:5.71414,code_ddg:"GRE"},{id:340,name:"GRENOBLE UNIVERSITES GIERES",uid:"851",station_type:0,x:45.1847222,y:5.7844444,code_ddg:"GRS"},{id:343,name:"GROISY",uid:"854",station_type:0,x:46.0085777,y:6.1754733,code_ddg:"GTC"},{id:346,name:"GRÉSY SUR AIX",uid:"853",station_type:0,x:45.724686,y:5.92198,code_ddg:"GAX"},{id:350,name:"HENDAYE",uid:"219",station_type:0,x:43.35317,y:-1.78209,code_ddg:"HED"},{id:354,name:"HYÈRES",uid:"855",station_type:0,x:43.1087858,y:6.1253433,code_ddg:"HYE"},{id:376,name:"LA BAULE ESCOUBLAC",uid:"237",station_type:0,x:47.28867,y:-2.38907,code_ddg:"LBE"},{id:392,name:"LA HAIE FOUASSIÈRE",uid:"856",station_type:0,x:47.1588425,y:-1.3970149,code_ddg:"LHE"},{id:396,name:"LA ROCHE SUR FORON",uid:"857",station_type:0,x:46.06673,y:6.304349,code_ddg:"LRF"},{id:397,name:"LA ROCHE SUR YON",uid:"251",station_type:0,x:46.67156,y:-1.43588,code_ddg:"LRY"},{id:398,name:"LA ROCHELLE",uid:"252",station_type:0,x:46.1527,y:-1.14529,code_ddg:"LRE"},{id:407,name:"LAMBALLE",uid:"859",station_type:0,x:48.465834,y:-2.511487,code_ddg:"LAM"},{id:408,name:"LANCEY",uid:"860",station_type:0,x:45.234523,y:5.880887,code_ddg:"LCW"},{id:409,name:"LANDERNEAU",uid:"861",station_type:0,x:48.453667,y:-4.256256,code_ddg:"LDO"},{id:410,name:"LANGRES",uid:"862",station_type:0,x:47.877225,y:5.345278,code_ddg:"LAG"},{id:411,name:"LANNION",uid:"863",station_type:0,x:48.727268,y:-3.46033,code_ddg:"LNI"},{id:416,name:"LAROCHE MIGENNES",uid:"258",station_type:0,x:47.96086,y:3.51295,code_ddg:"LAR"},{id:417,name:"LAVAL",uid:"259",station_type:0,x:48.07632,y:-.76115,code_ddg:"LAL"},{id:421,name:"LE CREUSOT TGV",uid:"263",station_type:0,x:46.76517,y:4.50007,code_ddg:"LCM"},{id:423,name:"LE GRAND LEMPS",uid:"864",station_type:0,x:45.396669,y:5.423168,code_ddg:"LGL"},{id:425,name:"LE HAVRE",uid:"264",station_type:0,x:49.493,y:.12592,code_ddg:"LHA"},{id:428,name:"LE MANS",uid:"265",station_type:0,x:47.99489,y:.1943,code_ddg:"LEN"},{id:432,name:"LE PALLET",uid:"865",station_type:0,x:47.1437189,y:-1.3474825,code_ddg:"PLL"},{id:437,name:"LE PUY EN VELAY",uid:"866",station_type:0,x:45.042779,y:3.892571,code_ddg:"LPU"},{id:441,name:"LENS",uid:"272",station_type:0,x:50.4263,y:2.82854,code_ddg:"LNS"},{id:442,name:"LES ARCS DRAGUIGNAN",uid:"273",station_type:0,x:43.45552,y:6.4825,code_ddg:"LAC"},{id:444,name:"LES AUBRAIS ORLEANS",uid:"275",station_type:0,x:47.92692,y:1.90609,code_ddg:"LAB"},{id:458,name:"LEZOUX",uid:"923",station_type:0,x:45.821233,y:3.385935,code_ddg:"LEZ"},{id:461,name:"LIBOURNE",uid:"288",station_type:0,x:44.91578,y:-.23604,code_ddg:"LIB"},{id:465,name:"LILLE EUROPE",uid:"291",station_type:0,x:50.63969,y:3.0749,code_ddg:"LEW"},{id:466,name:"LILLE FLANDRES",uid:"292",station_type:0,x:50.63574,y:3.07244,code_ddg:"LLF"},{id:469,name:"LIMOGES",uid:"294",station_type:0,x:45.83722,y:1.26901,code_ddg:"LIM"},{id:471,name:"LISIEUX",uid:"295",station_type:0,x:49.13726,y:.23168,code_ddg:"LIS"},{id:479,name:"LONGUEAU",uid:"301",station_type:0,x:49.86431,y:2.35205,code_ddg:"LUA"},{id:483,name:"LONGWY",uid:"867",station_type:0,x:49.513063,y:5.769226,code_ddg:"LWY"},{id:484,name:"LONS LE SAUNIER",uid:"303",station_type:0,x:46.6684,y:5.55088,code_ddg:"LLS"},{id:485,name:"LORIENT",uid:"304",station_type:0,x:47.75521,y:-3.36634,code_ddg:"LRT"},{id:486,name:"LORRAINE TGV",uid:"305",station_type:0,x:48.94405,y:6.16738,code_ddg:"TGL"},{id:487,name:"LOURDES*",uid:"306",station_type:0,x:43.1006,y:-.04181,code_ddg:"LDS"},{id:491,name:"LUNEVILLE",uid:"310",station_type:0,x:48.5881,y:6.50794,code_ddg:"LNE"},{id:494,name:"LYON JEAN MACE",uid:"928",station_type:0,x:45.745437,y:4.84187,code_ddg:"LJC"},{id:496,name:"LYON PART DIEU",uid:"312",station_type:0,x:45.76029,y:4.8598,code_ddg:"LYD"},{id:497,name:"LYON PERRACHE",uid:"313",station_type:0,x:45.74841,y:4.82286,code_ddg:"LPR"},{id:498,name:"LYON SAINT EXUPERY",uid:"314",station_type:0,x:45.72093,y:5.07584,code_ddg:"SXA"},{id:499,name:"MACHILLY",uid:"868",station_type:0,x:46.2269646,y:6.3083376,code_ddg:"MCI"},{id:500,name:"MACON LOCHE",uid:"315",station_type:0,x:46.28285,y:4.77864,code_ddg:"MLH"},{id:501,name:"MACON VILLE",uid:"316",station_type:0,x:46.30291,y:4.82448,code_ddg:"MAC"},{id:503,name:"MAGLAND",uid:"869",station_type:0,x:46.0173568,y:6.6227761,code_ddg:"MGD"},{id:517,name:"MARIGNIERS",uid:"870",station_type:0,x:46.088743,y:6.507874,code_ddg:"MRG"},{id:520,name:"MARNE LA VALLEE CHESSY",uid:"328",station_type:0,x:48.86942,y:2.78257,code_ddg:"MLV"},{id:524,name:"MARSEILLE SAINT CHARLES",uid:"331",station_type:0,x:43.30337,y:5.38199,code_ddg:"MSC"},{id:526,name:"MASSERET",uid:"924",station_type:0,x:45.535994,y:1.541004,code_ddg:"MST"},{id:529,name:"MASSY TGV",uid:"334",station_type:0,x:48.72869,y:2.26499,code_ddg:"MPW"},{id:539,name:"MENTON",uid:"342",station_type:0,x:43.77464,y:7.49344,code_ddg:"MEN"},{id:541,name:"METZ VILLE",uid:"345",station_type:0,x:49.10924,y:6.17778,code_ddg:"MZE"},{id:545,name:"MEUSE TGV",uid:"349",station_type:0,x:48.97972,y:5.27509,code_ddg:"TGM"},{id:546,name:"MIRAMAS",uid:"871",station_type:0,x:43.580506,y:4.999538,code_ddg:"MAS"},{id:548,name:"MODANE",uid:"872",station_type:0,x:45.192774,y:6.658348,code_ddg:"MOD"},{id:549,name:"MOIRANS",uid:"873",station_type:0,x:45.3238653,y:5.5791989,code_ddg:"MOA"},{id:550,name:"MONACO",uid:"351",station_type:0,x:43.73623,y:7.41977,code_ddg:"MNA"},{id:552,name:"MONT DE MARSAN",uid:"352",station_type:0,x:43.88474,y:-.50423,code_ddg:"MMR"},{id:555,name:"MONTAUBAN-VILLE BOURBON",uid:"355",station_type:0,x:44.0145,y:1.34158,code_ddg:"MBN"},{id:556,name:"MONTBARD",uid:"874",station_type:0,x:47.6187191,y:4.3365955,code_ddg:"MBA"},{id:557,name:"MONTBÉLIARD",uid:"914",station_type:0,x:47.510471,y:6.801662,code_ddg:"MBD"},{id:558,name:"MONTELIMAR",uid:"356",station_type:0,x:44.55907,y:4.7447,code_ddg:"MTR"},{id:566,name:"MONTLUCON VILLE",uid:"363",station_type:0,x:46.3376,y:2.59631,code_ddg:"MLN"},{id:567,name:"MONTMÉLIAN",uid:"875",station_type:0,x:45.503072,y:6.04313,code_ddg:"MML"},{id:568,name:"MONTPELLIER",uid:"364",station_type:0,x:43.60584,y:3.88237,code_ddg:"MPL"},{id:577,name:"MOULINS SUR ALLIER",uid:"373",station_type:0,x:46.55817,y:3.33816,code_ddg:"MSA"},{id:579,name:"MOUTIERS SALIN",uid:"375",station_type:0,x:45.48683,y:6.53004,code_ddg:"MOS"},{id:581,name:"MULHOUSE VILLE",uid:"376",station_type:0,x:47.7418,y:7.34285,code_ddg:"MSE"},{id:585,name:"NANCY VILLE",uid:"378",station_type:0,x:48.69002,y:6.1739,code_ddg:"NCY"},{id:590,name:"NANTES",uid:"382",station_type:0,x:47.21676,y:-1.54295,code_ddg:"NTS"},{id:593,name:"NARBONNE",uid:"384",station_type:0,x:43.19104,y:3.00596,code_ddg:"NBN"},{id:600,name:"NEVERS",uid:"389",station_type:0,x:46.98755,y:3.15042,code_ddg:"NVS"},{id:601,name:"NICE VILLE",uid:"391",station_type:0,x:43.70538,y:7.26341,code_ddg:"NIC"},{id:602,name:"NIMES",uid:"392",station_type:0,x:43.83229,y:4.36584,code_ddg:"NMS"},{id:603,name:"NIORT",uid:"393",station_type:0,x:46.31935,y:-.45438,code_ddg:"NRT"},{id:621,name:"ORLEANS",uid:"404",station_type:0,x:47.90815,y:1.90475,code_ddg:"ORL"},{id:627,name:"ORTHEZ",uid:"915",station_type:0,x:43.420011,y:-.622787,code_ddg:"ORT"},{id:638,name:"PARIS AUSTERLITZ",uid:"417",station_type:0,x:48.84049,y:2.36702,code_ddg:"PAZ"},{id:641,name:"PARIS BERCY",uid:"419",station_type:0,x:48.84041,y:2.38404,code_ddg:"PBY"},{id:643,name:"PARIS GARE DE L'EST",uid:"420",station_type:0,x:48.87755,y:2.35914,code_ddg:"PES"},{id:645,name:"PARIS GARE DE LYON",uid:"422",station_type:0,x:48.84414,y:2.37398,code_ddg:"PLY"},{id:648,name:"PARIS GARE DU NORD",uid:"424",station_type:0,x:48.88164,y:2.35614,code_ddg:"PNO"},{id:652,name:"PARIS MONTPARNASSE",uid:"427",station_type:0,x:48.83982,y:2.31879,code_ddg:"PMP"},{id:654,name:"PARIS SAINT LAZARE",uid:"429",station_type:0,x:48.87787,y:2.32443,code_ddg:"PSL"},{id:657,name:"PAU",uid:"431",station_type:0,x:43.29147,y:-.36946,code_ddg:"PAU"},{id:659,name:"PERIGUEUX",uid:"433",station_type:0,x:45.18717,y:.70718,code_ddg:"PXR"},{id:660,name:"PERPIGNAN",uid:"434",station_type:0,x:42.69608,y:2.87962,code_ddg:"PPN"},{id:669,name:"PLOUARET",uid:"877",station_type:0,x:48.6080015,y:-3.4699261,code_ddg:"PLT"},{id:671,name:"POITIERS",uid:"443",station_type:0,x:46.58231,y:.33276,code_ddg:"PST"},{id:672,name:"POLIÉNAS",uid:"878",station_type:0,x:45.2987807,y:5.4853014,code_ddg:"POS"},{id:673,name:"PONT DE DORE LE CHAMBON",uid:"879",station_type:0,x:45.5797935,y:2.8061974,code_ddg:"PDO"},{id:682,name:"PONTARLIER",uid:"880",station_type:0,x:46.8964996,y:6.357289,code_ddg:"PTL"},{id:683,name:"PONTCHARRA SUR BREDA-ALLEVARD",uid:"881",station_type:0,x:45.43423,y:6.007649,code_ddg:"PCA"},{id:691,name:"PRINGY",uid:"882",station_type:0,x:46.010853,y:6.175942,code_ddg:"PGY"},{id:695,name:"PÉRRIGNIER",uid:"876",station_type:0,x:46.303267,y:6.424942,code_ddg:"PEG"},{id:696,name:"QUIMPER",uid:"455",station_type:0,x:47.99466,y:-4.0921,code_ddg:"QPR"},{id:700,name:"REDON",uid:"458",station_type:0,x:47.65177,y:-2.08788,code_ddg:"RDN"},{id:701,name:"REIGNIER",uid:"884",station_type:0,x:46.1299578,y:6.2669481,code_ddg:"REI"},{id:702,name:"REIMS",uid:"459",station_type:0,x:49.25907,y:4.02403,code_ddg:"RMS"},{id:704,name:"RENNES",uid:"460",station_type:0,x:48.10307,y:-1.67213,code_ddg:"RES"},{id:705,name:"RETOURNAC",uid:"885",station_type:0,x:45.2010934,y:4.0369348,code_ddg:"RET"},{id:708,name:"RIOM",uid:"933",station_type:0,x:45.8902,y:3.12057,code_ddg:"RIO"},{id:710,name:"RIVES",uid:"886",station_type:0,x:44.83579,y:-.55437,code_ddg:"RIV"},{id:711,name:"ROANNE",uid:"818",station_type:0,x:46.0391817,y:4.0718684,code_ddg:"ROA"},{id:713,name:"RODEZ",uid:"887",station_type:0,x:44.2144544,y:2.3500111,code_ddg:"RDZ"},{id:719,name:"ROUEN RIVE DROITE",uid:"469",station_type:0,x:49.44951,y:1.09375,code_ddg:"RRD"},{id:721,name:"ROYAN",uid:"888",station_type:0,x:45.6258944,y:-1.0164778,code_ddg:"ROY"},{id:722,name:"ROYAT-CHAMALLIERES",uid:"889",station_type:0,x:45.7942322,y:3.0502702,code_ddg:"RYA"},{id:723,name:"RUMILLY",uid:"890",station_type:0,x:45.862998,y:5.948163,code_ddg:"RUM"},{id:725,name:"RÉAUMONT",uid:"883",station_type:0,x:45.37939,y:5.5436296,code_ddg:"RCS"},{id:726,name:"SAINCAIZE",uid:"891",station_type:0,x:46.931431,y:3.071739,code_ddg:"SZE"},{id:728,name:"SAINT BRIEUC",uid:"471",station_type:0,x:48.50723,y:-2.76546,code_ddg:"SBC"},{id:733,name:"SAINT ETIENNE",uid:"476",station_type:0,x:45.44338,y:4.4,code_ddg:"SEN"},{id:740,name:"SAINT JEAN DE LUZ",uid:"481",station_type:0,x:43.38576,y:-1.66089,code_ddg:"SJZ"},{id:753,name:"SAINT NAZAIRE",uid:"488",station_type:0,x:47.28674,y:-2.2113,code_ddg:"SNA"},{id:758,name:"SAINT PIERRE DES CORPS",uid:"492",station_type:0,x:47.38574,y:.72507,code_ddg:"SPC"},{id:761,name:"SAINT QUENTIN",uid:"493",station_type:0,x:49.8397,y:3.29709,code_ddg:"SQT"},{id:763,name:"SAINT RAPHAEL",uid:"495",station_type:0,x:43.42437,y:6.7685,code_ddg:"SRV"},{id:772,name:"SAINTES",uid:"892",station_type:0,x:45.7486111,y:-.6177778,code_ddg:"SKW"},{id:773,name:"SALLANCHES",uid:"893",station_type:0,x:45.9354364,y:6.6339493,code_ddg:"SLS"},{id:778,name:"SAUMUR",uid:"916",station_type:0,x:48.88066,y:.021136,code_ddg:"SUD"},{id:779,name:"SAVENAY",uid:"934",station_type:0,x:47.358,y:-1.94821,code_ddg:"SNY"},{id:780,name:"SAVERNE",uid:"504",station_type:0,x:48.74478,y:7.36216,code_ddg:"SNE"},{id:787,name:"SETE",uid:"509",station_type:0,x:43.41282,y:3.6964,code_ddg:"STE"},{id:794,name:"ST ANDRÉ LE GAZ",uid:"895",station_type:0,x:45.544593,y:5.52448,code_ddg:"SAG"},{id:795,name:"ST EGRÈVE",uid:"896",station_type:0,x:45.2344099,y:5.6734159,code_ddg:"SEG"},{id:796,name:"ST GERMAIN DES FOSSES",uid:"897",station_type:0,x:46.209133,y:3.430528,code_ddg:"SGF"},{id:797,name:"ST GERVAIS",uid:"898",station_type:0,x:48.8802255,y:2.3987371,code_ddg:"SGB"},{id:798,name:"ST HILAIRE",uid:"899",station_type:0,x:50.132073,y:3.913685,code_ddg:"SHN"},{id:799,name:"ST JEAN DE MAURIENNE",uid:"900",station_type:0,x:45.277891,y:6.354293,code_ddg:"SJM"},{id:800,name:"ST JULIEN EN GENEVOIS",uid:"901",station_type:0,x:46.141983,y:6.085621,code_ddg:"SJG"},{id:801,name:"ST MARCELLIN",uid:"902",station_type:0,x:45.150416,y:5.322044,code_ddg:"SCI"},{id:802,name:"ST MARTIN DE BELLEVUE",uid:"903",station_type:0,x:47.0660215,y:6.9318245,code_ddg:"SML"},{id:803,name:"ST PIERRE EN FAUCIGNY",uid:"904",station_type:0,x:46.0608652,y:6.3787336,code_ddg:"SPE"},{id:804,name:"ST POL SUR TERNOISE",uid:"925",station_type:0,x:50.379118,y:2.339149,code_ddg:"SPT"},{id:805,name:"ST-DIÉ-DES-VOSGES",uid:"905",station_type:0,x:48.2823446,y:6.9488701,code_ddg:"STD"},{id:807,name:"STRASBOURG",uid:"517",station_type:0,x:48.58517,y:7.73397,code_ddg:"STG"},{id:811,name:"SURGERES",uid:"929",station_type:0,x:46.1131,y:-.76222,code_ddg:"SGE"},{id:816,name:"TARBES",uid:"523",station_type:0,x:43.23981,y:.06941,code_ddg:"TBS"},{id:819,name:"TGV HAUTE PICARDIE",uid:"525",station_type:0,x:49.86115,y:2.8323,code_ddg:"HPI"},{id:821,name:"THIONVILLE",uid:"527",station_type:0,x:49.35425,y:6.17085,code_ddg:"THL"},{id:823,name:"THONON LES BAINS",uid:"906",station_type:0,x:46.3691667,y:6.4811111,code_ddg:"THO"},{id:828,name:"TOULON",uid:"531",station_type:0,x:43.12836,y:5.92972,code_ddg:"TLN"},{id:829,name:"TOULOUSE MATABIAU",uid:"532",station_type:0,x:43.61157,y:1.45409,code_ddg:"TSE"},{id:830,name:"TOURCOING",uid:"533",station_type:0,x:50.71651,y:3.168031,code_ddg:"TRG"},{id:832,name:"TOURS",uid:"535",station_type:0,x:47.38823,y:.69472,code_ddg:"TRS"},{id:839,name:"TROUVILLE-DEAUVILLE",uid:"539",station_type:0,x:49.35851,y:.08486,code_ddg:"TDE"},{id:840,name:"TROYES",uid:"540",station_type:0,x:48.29503,y:4.06539,code_ddg:"TOY"},{id:841,name:"TULLINS FURES",uid:"907",station_type:0,x:45.3005501,y:5.4875072,code_ddg:"TLE"},{id:843,name:"UZERCHE",uid:"926",station_type:0,x:45.442188,y:1.572247,code_ddg:"URE"},{id:850,name:"VAL DE REUIL",uid:"546",station_type:0,x:49.27607,y:1.22457,code_ddg:"VDR"},{id:852,name:"VALENCE TGV",uid:"548",station_type:0,x:44.99145,y:4.97872,code_ddg:"VAL"},{id:853,name:"VALENCE VILLE",uid:"549",station_type:0,x:44.92805,y:4.89361,code_ddg:"VCE"},{id:854,name:"VALENCIENNES",uid:"550",station_type:0,x:50.3574,y:3.51583,code_ddg:"VSN"},{id:855,name:"VALLEIRY",uid:"908",station_type:0,x:46.1436405,y:5.960516,code_ddg:"VEY"},{id:857,name:"VANNES",uid:"552",station_type:0,x:47.66533,y:-2.75252,code_ddg:"VAN"},{id:868,name:"VERNON",uid:"560",station_type:0,x:49.09128,y:1.47836,code_ddg:"VNO"},{id:876,name:"VESOUL",uid:"568",station_type:0,x:47.61748,y:6.15175,code_ddg:"VES"},{id:878,name:"VICHY",uid:"570",station_type:0,x:46.12688,y:3.43071,code_ddg:"VHY"},{id:879,name:"VIERZON",uid:"571",station_type:0,x:47.22654,y:2.06098,code_ddg:"VER"},{id:882,name:"VIGEOIS",uid:"927",station_type:0,x:45.382597,y:1.515083,code_ddg:"VGE"},{id:905,name:"VINAY",uid:"909",station_type:0,x:45.207897,y:5.410163,code_ddg:"VNA"},{id:910,name:"VIRRIEU SUR BOURBRE",uid:"910",station_type:0,x:45.49179,y:5.472026,code_ddg:"VRB"},{id:914,name:"VIVIERS DU LAC",uid:"911",station_type:0,x:45.64853,y:5.903317,code_ddg:"VDX"},{id:915,name:"VOIRON",uid:"912",station_type:0,x:45.363895,y:5.594655,code_ddg:"VOR"},{id:916,name:"VOREPPE",uid:"913",station_type:0,x:45.2908245,y:5.6339041,code_ddg:"VPE"}]
}),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};define("views/SearchView",["require","backbone","collections/StationCollection","event","json!data/station.json"],function(t){var n,i,r,o,s;return n=t("backbone"),o=t("collections/StationCollection"),i=t("event"),s=t("json!data/station.json"),r=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.el="body",n.prototype.events={"keyup #search":"searchStation"},n.prototype.initialize=function(){return this.search=$("#search"),this.form=$("form.navbar-search"),this.collection=new o,this.listenToOnce(this.collection,"reset",this.searchStation),this.collection.reset(s)},n.prototype.searchStation=function(){var t;return t=this.collection.findPerName(this.search.val()),null!=t[0]&&(this.firstResult=t[0]),1===t.length&&i.trigger("station:selected",this.firstResult),i.trigger("search:complete",this.firstResult,this.collection.findPerName(this.search.val()))},n}(n.View)})}.call(this),function(t){function e(){t.each(this.queue,function(t,e){"function"==typeof e&&e.call(null)})}t.error=function(t){throw Error(t)},t.Deferred=function(){return this instanceof t.Deferred?(this.queue=[],this._state="pending",void 0):new t.Deferred};var n,i,r,o=t.Deferred.prototype;o.resolve=function(){this._state="resolved",e.call(this)},o.state=function(){return this._state},o.done=function(t){return"pending"===this._state?(this.queue.push(t),void 0):(t.call(null),void 0)},n=function(){this.store={},this.counter=0},i=n.prototype,i.data=function(t,e,n){return n?(t.__data||(t.__data="cache"+this.counter++),this.store[t.__data]=this.store[t.__data]||{},this.store[t.__data][e]=n,void 0):this.store[t.__data]&&this.store[t.__data][e]},i.removeData=function(t,e){return e?(this.store[t.__data][e]=null,void 0):(this.store[t.__data]=null,void 0)},r=new n,t.data=function(){return r.data.apply(r,arguments)},t.removeData=function(){return r.removeData.apply(r,arguments)},window.jQuery=t}(Zepto),define("jherezepto",["zepto"],function(t){return function(){var e;return e||t.$}}(this)),function(t,e,n){function i(e,n){this.element=e,this.options=t.extend({},l,n),this._defaults=l,this._plugin=v,this.init()}function r(){var t=this.map||{};return{center:t.center,zoom:t.zoomLevel,bbox:t.getViewBounds&&t.getViewBounds(),type:this.mtype}}function o(t,e){var n=new p.kml.Manager;n.addObserver("state",_(function(t){"finished"===t.state&&e.call(this,t)},this)),n.parseKML(t)}function s(e){var n=e.target,i=this.map.pixelToGeo(e.displayX,e.displayY);n===this.map&&(e.type="map"+e.type,t(this.element).trigger(u(e,i)))}function a(t){var e=t.target,n=e[t.type];c(n)&&n.call(this.element,u(t,e.coordinate))}function u(e,n){return t.Event(e.type,{originalEvent:e,geo:{latitude:n.latitude,longitude:n.longitude},target:e.target})}function c(t){return"function"==typeof t}function d(){return!!t().on}var l,h,p,f,m,y,g,v="jHERE",_=t.proxy,x="mouse",E="click",b="drag",S="touch",w="start",A="end",N="move",T=[E,"dbl"+E,x+"up",x+"down",x+N,x+"over",x+"out",x+"enter",x+"leave","longpress",b+w,b,b+A,"resize",S+w,S+A,S+N];l={appId:"69Dgg78qt4obQKxVbRA8",authToken:"Nz7ilIB_v1CRwPXxgPdvuA",zoom:12,center:[52.49,13.37],enable:["behavior","zoombar","scalebar","typeselector"],type:"map",marker:{text:"",textColor:"#333333",fill:"#ff6347",stroke:"#333333",shape:"balloon",icon:void 0},bubble:{content:"",closable:!0,onclose:t.noop},heatmap:{max:20,opacity:.8,coarseness:2}},t[v]=g={},h=i.prototype,g.defaultCredentials=function(t,e){y={appId:t,authenticationToken:e},m.load().is.done(function(){p.util.ApplicationContext.set(y)})},h.init=function(){m.load().is.done(_(this.makemap,this))},h.makemap=function(){var e=this,n=e.options,i=f.component,r=[],o=_(s,e),a={};i.Positioning=p.positioning.component.Positioning,y=y||{appId:n.appId,authenticationToken:n.authToken},p.util.ApplicationContext.set(y),t.data(e.element,v,!0),t.each(i,_(function(n,i){return n=n.toLowerCase(),~t.inArray(n,e.options.enable)?c(i)&&r.push(new i)||t.error("invalid: "+n):void 0},e)),e.map=new f.Display(e.element,{zoomLevel:n.zoom,center:n.center,components:r}),e.type(n.type),e._mc=new f.Container,e.map.objects.add(e._mc),t.each(T,function(t,e){a[e]=[o,!1,null]}),e.map.addListeners(a)},h.center=function(t){this.map.setCenter(t)},h.zoom=function(t){this.map.set("zoomLevel",t)},h.type=function(t){var e=this.map,n={map:e.NORMAL,satellite:e.SATELLITE,smart:e.SMARTMAP,terrain:e.TERRAIN,pt:e.SMART_PT,community:e.NORMAL_COMMUNITY,satcommunity:e.SATELLITE_COMMUNITY,traffic:e.TRAFFIC};t in n?(this.mtype=t,t=n[t]):(this.mtype="map",t=n.map),e.set("baseMapType",t)},h.marker=function(e,n){var i={},r=_(a,this),o=this._mc,s="Marker";t.each(T,function(t,e){i[e]=[r,!1,null]}),n=t.extend({},l.marker,n),n.textPen=n.textPen||{strokeColor:n.textColor},n.pen=n.pen||{strokeColor:n.stroke},n.brush=n.brush||{color:n.fill},n.eventListener=i,n.icon||(s="Standard"+s),o.objects.add(new f[s](e,n))},h.nomarkers=function(){this._mc.objects.clear()},h.bubble=function(e,n){var i,r=this.map;n=t.extend({},l.bubble,n),n.content.jquery&&(n.content.css("white-space","normal"),n.content=t("<div/>").append(n.content.clone()).html()),i=r.getComponentById("InfoBubbles")||r.addComponent(new f.component.InfoBubbles),i.openBubble(n.content,{latitude:e.latitude||e[0],longitude:e.longitude||e[1]},n.onclose,!n.closable)},h.nobubbles=function(){var t;return(t=this.map.getComponentById("InfoBubbles"))&&t.closeAll()},h.kml=function(t,e,n){c(e)&&(n=e,e=!1),o.call(this,t,_(function(t){var i=this.map,r=new p.kml.component.KMLResultSet(t.kmlDocument,i);r.addObserver("state",_(function(t){var r,o;"finished"===t.state&&(e&&(r=t.container.objects.get(0),o=r.getBoundingBox(),o&&i.zoomTo(o)),c(n)&&n.call(this,t))},this)),i.objects.add(r.create())},this))},h.heatmap=function(e,n,i){var r;n=n||"value",n.match(/^density|value$/)||(n="value"),i=i||{},i.type=n,i=t.extend({},l.heatmap,i),r=new p.heatmap.Overlay(i),r.addData(e),this.map.overlays.add(r)},h.originalMap=function(t){t.call(this.element,this.map,p)},h.destroy=function(){this.map.destroy(),t.removeData(this.element),t(this.element).empty()},m={},m.is=!1,m.load=function(){var e,i,r;return m.is&&m.is.state().match(/pending|resolved/)?this:(m.is=t.Deferred(),r=function(){p=nokia.maps,p.Features.load({map:"auto",ui:"auto",search:"auto",routing:"auto",positioning:"auto",behavior:"auto",kml:"auto",heatmap:"auto"},function(){f=p.map,m.is.resolve()})},e=n.getElementsByTagName("head")[0],i=n.createElement("script"),i.src="http://api.maps.nokia.com/2.2.3/jsl.js",i.type="text/javascript",i.charset="utf-8",i.onreadystatechange=function(){i.readyState.match(/loaded|complete/)&&r()},i.onload=r,e.appendChild(i),this)},g._JSLALoader=m,g.extend=function(t,e){"string"==typeof t&&c(e)&&(h[t]=e)},t.fn[v]=function(e){var n,o=arguments,s="plg_"+v;return d()||t.error(v+" requires Zepto or jQuery >= 1.7"),!e&&(n=t.data(this[0],s))?r.call(n):this.each(function(){var r;n=t.data(this,s),n?("string"!=typeof e&&t.error(v+" already initialized, expected method."),r=e,o=Array.prototype.slice.call(o,1),c(n[r])||t.error(v+": "+r+" does not exist"),m.load().is.done(function(){n[r].apply(n,o)})):(n=new i(this,e),t.data(this,s,n))})}}(jQuery,window,document),define("jhere",["jherezepto"],function(t){return function(){var e;return e||t.$}}(this)),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};define("views/MapView",["require","backbone","event","jhere"],function(t){var n,i,r;return n=t("backbone"),i=t("event"),t("jhere"),r=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(){return i.once("search:complete",this.displayMarker,this),i.on("search:complete",this.centerMap,this),i.on("station:selected",this.centerMap,this),i.on("station:hover",this.addBubbles,this)},n.prototype.addBubbles=function(t){return $("#map").jHERE("center",t.getPosition()),$("#map").jHERE("bubble",t.getPosition(),{content:t.get("name")})},n.prototype.centerMap=function(t){return $("#map").jHERE("center",t.getPosition())},n.prototype.displayMarker=function(t,e){return e.forEach(function(t){return $("#map").jHERE("marker",t.getPosition(),{icon:"img/steamtrain.png",anchor:{x:12,y:30},click:function(){return i.trigger("station:selected",t)}})}),!1},n.prototype.render=function(){return this.map=$("#map").jHERE({appId:"usgKT-xql56_vPTmD3Z5",authToken:"vR2pZ6q3EMnE3PX6fqt9uw"}),this},n}(n.View)})}.call(this),function(){define("template/helpers/capitalize",["handlebars"],function(t){var e;return e=function(t){var e;return e=(""+t).toLowerCase(),e.charAt(0).toUpperCase()+e.slice(1)},t.registerHelper("capitalize",e),e})}.call(this),define("hbs!template/station/rowStation",["hbs","handlebars","template/helpers/capitalize"],function(t,e){var n=e.template(function(t,e,n){n=n||t.helpers;var i,r,o="",s=n.helperMissing,a=this.escapeExpression,u="function";return o+="<td>",i=e.name,r=n.capitalize,i=r?r.call(e,i,{hash:{}}):s.call(e,"capitalize",i,{hash:{}}),o+=a(i)+"</td>\n<td>",r=n.code_ddg,r?i=r.call(e,{hash:{}}):(i=e.code_ddg,i=typeof i===u?i():i),o+=a(i)+"</td>"});return e.registerPartial("template_station_rowStation",n),n}),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};define("views/StationView",["require","backbone","hbs!template/station/rowStation","event"],function(t){var n,i,r,o;return n=t("backbone"),o=t("hbs!template/station/rowStation"),i=t("event"),r=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.tagName="tr",n.prototype.events={mouseover:"onMouseOver",click:"chooseStation"},n.prototype.chooseStation=function(){return i.trigger("station:selected",this.model)},n.prototype.onMouseOver=function(){return i.trigger("station:hover",this.model)},n.prototype.render=function(){return this.$el.html(o(this.model.toJSON())),this},n}(n.View)})}.call(this),define("hbs!template/station/tableStation",["hbs","handlebars"],function(t,e){var n=e.template(function(t,e,n){return n=n||t.helpers,'<div class="container">\n<div id="table-header" class="row">\n\n<table class="table table-hover">\n  <thead>\n    <tr>\n      <th>Name</th>\n      <th>Code</th>\n    </tr>\n  </thead>\n</table>  \n</div>\n\n<table class="table table-hover">\n  <tbody>\n    \n  </tbody>\n</table>	\n</div>'});return e.registerPartial("template_station_tableStation",n),n}),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};define("views/TableStationView",["require","backbone","event","views/StationView","hbs!template/station/tableStation"],function(t){var n,i,r,o,s;return n=t("backbone"),i=t("event"),r=t("views/StationView"),s=t("hbs!template/station/tableStation"),o=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(){return this.rowViews=[],i.on("search:complete",this.render,this)},n.prototype.render=function(t,e){var n=this;return this.$el.html(s()),e.forEach(function(t,e){return n.rowViews[e]=new r({model:t}),n.$el.find("tbody").append(n.rowViews[e].render().el)})},n}(n.View)})}.call(this),function(t,e){function n(n,i,r,o,s){"function"!=typeof i||s||(s=i,i=e);var a={opacity:r};return o&&(a.scale=o,n.css(t.fx.cssPrefix+"transform-origin","0 0")),n.animate(a,i,null,s)}function i(e,i,r,o){return n(e,i,0,r,function(){s.call(t(this)),o&&o.call(this)})}var r=window.document,o=(r.documentElement,t.fn.show),s=t.fn.hide,a=t.fn.toggle;t.fn.show=function(t,i){return o.call(this),t===e?t=0:this.css("opacity",0),n(this,t,1,"1,1",i)},t.fn.hide=function(t,n){return t===e?s.call(this):i(this,t,"0,0",n)},t.fn.toggle=function(n,i){return n===e||"boolean"==typeof n?a.call(this,n):this.each(function(){var e=t(this);e["none"==e.css("display")?"show":"hide"](n,i)})},t.fn.fadeTo=function(t,e,i){return n(this,t,e,null,i)},t.fn.fadeIn=function(t,e){var n=this.css("opacity");return n>0?this.css("opacity",0):n=1,o.call(this).fadeTo(t,n,e)},t.fn.fadeOut=function(t,e){return i(this,t,null,e)},t.fn.fadeToggle=function(e,n){return this.each(function(){var i=t(this);i[0==i.css("opacity")||"none"==i.css("display")?"fadeIn":"fadeOut"](e,n)})}}(Zepto),define("fx_methods",["zepto"],function(t){return function(){var e;return e||t.$}}(this)),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};define("views/MapStationView",["require","backbone","hbs!template/station/main","views/SearchView","views/MapView","views/TableStationView","event","fx_methods"],function(t){var n,i,r,o,s,a,u;return n=t("backbone"),u=t("hbs!template/station/main"),s=t("views/SearchView"),o=t("views/MapView"),a=t("views/TableStationView"),i=t("event"),t("fx_methods"),r=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.el="#mapView",n.prototype.events={"click #fullscreen":"changeSize"},n.prototype.changeSize=function(){return this.fullScreen?(this.fullScreen=!1,this.turnMapRegularSize()):(this.fullScreen=!0,this.turnMapFullScreen($(window).height()))},n.prototype.turnMapFullScreen=function(t){return $("#map").css("height",t)},n.prototype.turnMapRegularSize=function(){return $("#map").css("height",this.mapHeight)},n.prototype.updateSizeMap=function(t){return this.fullScreen?this.turnMapFullScreen(t):this.turnMapRegularSize()},n.prototype.initialize=function(){return i.on("station:selected",this.changeStation,this),i.on("window:resized",this.updateSizeMap,this),this.render(),this.fullScreen=!1,this.mapHeight=$("#map").css("height")},n.prototype.render=function(){return this.$el.html(u()),this.tableStationView=(new a).setElement($("#stations")),this.searchView=new s,this.mapView=(new o).setElement($("#map")).render()},n.prototype.changeStation=function(t){return $("#station").html(t.getNameToDisplay())},n.prototype.hide=function(){return this.$el.hide()},n.prototype.show=function(){return $("ul.nav li").removeClass("active"),$($("ul.nav li")[0]).addClass("active"),this.$el.fadeIn()},n}(n.View)})}.call(this),function(t){function e(t,e,n,i){var r=n.lang();return r[t].call?r[t](n,i):r[t][e]}function n(t,e){return function(n){return a(t.call(this,n),e)}}function i(t){return function(e){var n=t.call(this,e);return n+this.lang().ordinal(n)}}function r(t,e,n){this._d=t,this._isUTC=!!e,this._a=t._a||null,this._lang=n||!1}function o(t){var e=this._data={},n=t.years||t.y||0,i=t.months||t.M||0,r=t.weeks||t.w||0,o=t.days||t.d||0,a=t.hours||t.h||0,u=t.minutes||t.m||0,c=t.seconds||t.s||0,d=t.milliseconds||t.ms||0;this._milliseconds=d+1e3*c+6e4*u+36e5*a,this._days=o+7*r,this._months=i+12*n,e.milliseconds=d%1e3,c+=s(d/1e3),e.seconds=c%60,u+=s(c/60),e.minutes=u%60,a+=s(u/60),e.hours=a%24,o+=s(a/24),o+=7*r,e.days=o%30,i+=s(o/30),e.months=i%12,n+=s(i/12),e.years=n,this._lang=!1}function s(t){return 0>t?Math.ceil(t):Math.floor(t)}function a(t,e){for(var n=t+"";e>n.length;)n="0"+n;return n}function u(t,e,n){var i,r=e._milliseconds,o=e._days,s=e._months;r&&t._d.setTime(+t+r*n),o&&t.date(t.date()+o*n),s&&(i=t.date(),t.date(1).month(t.month()+s*n).date(Math.min(i,t.daysInMonth())))}function c(t){return"[object Array]"===Object.prototype.toString.call(t)}function d(t,e){var n,i=Math.min(t.length,e.length),r=Math.abs(t.length-e.length),o=0;for(n=0;i>n;n++)~~t[n]!==~~e[n]&&o++;return o+r}function l(t,e,n,i){var r,o,s=[];for(r=0;7>r;r++)s[r]=t[r]=null==t[r]?2===r?1:0:t[r];return t[7]=s[7]=e,null!=t[8]&&(s[8]=t[8]),t[3]+=n||0,t[4]+=i||0,o=new Date(0),e?(o.setUTCFullYear(t[0],t[1],t[2]),o.setUTCHours(t[3],t[4],t[5],t[6])):(o.setFullYear(t[0],t[1],t[2]),o.setHours(t[3],t[4],t[5],t[6])),o._a=s,o}function h(t,e){var n,i,r=[];for(!e&&k&&(e=require("./lang/"+t)),n=0;C.length>n;n++)e[C[n]]=e[C[n]]||M.en[C[n]];for(n=0;12>n;n++)i=T([2e3,n]),r[n]=RegExp("^"+(e.months[n]||e.months(i,""))+"|^"+(e.monthsShort[n]||e.monthsShort(i,"")).replace(".",""),"i");return e.monthsParse=e.monthsParse||r,M[t]=e,e}function p(t){var e="string"==typeof t&&t||t&&t._lang||null;return e?M[e]||h(e):T}function f(t){return t.match(/\[.*\]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function m(t){var e,n,i=t.match(D);for(e=0,n=i.length;n>e;e++)i[e]=ee[i[e]]?ee[i[e]]:f(i[e]);return function(r){var o="";for(e=0;n>e;e++)o+="function"==typeof i[e].call?i[e].call(r,t):i[e];return o}}function y(t,e){function n(e){return t.lang().longDateFormat[e]||e}for(var i=5;i--&&H.test(e);)e=e.replace(H,n);return K[e]||(K[e]=m(e)),K[e](t)}function g(t){switch(t){case"DDDD":return B;case"YYYY":return $;case"S":case"SS":case"SSS":case"DDD":return V;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":case"a":case"A":return F;case"Z":case"ZZ":return z;case"T":return Y;case"MM":case"DD":case"YY":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":return j;default:return RegExp(t.replace("\\",""))}}function v(t,e,n,i){var r,o;switch(t){case"M":case"MM":n[1]=null==e?0:~~e-1;break;case"MMM":case"MMMM":for(r=0;12>r;r++)if(p().monthsParse[r].test(e)){n[1]=r,o=!0;break}o||(n[8]=!1);break;case"D":case"DD":case"DDD":case"DDDD":null!=e&&(n[2]=~~e);break;case"YY":n[0]=~~e+(~~e>70?1900:2e3);break;case"YYYY":n[0]=~~Math.abs(e);break;case"a":case"A":i.isPm="pm"===(e+"").toLowerCase();break;case"H":case"HH":case"h":case"hh":n[3]=~~e;break;case"m":case"mm":n[4]=~~e;break;case"s":case"ss":n[5]=~~e;break;case"S":case"SS":case"SSS":n[6]=~~(1e3*("0."+e));break;case"Z":case"ZZ":i.isUTC=!0,r=(e+"").match(X),r&&r[1]&&(i.tzh=~~r[1]),r&&r[2]&&(i.tzm=~~r[2]),r&&"+"===r[0]&&(i.tzh=-i.tzh,i.tzm=-i.tzm)}null==e&&(n[8]=!1)}function _(t,e){var n,i,r=[0,0,1,0,0,0,0],o={tzh:0,tzm:0},s=e.match(D);for(n=0;s.length>n;n++)i=(g(s[n]).exec(t)||[])[0],i&&(t=t.slice(t.indexOf(i)+i.length)),ee[s[n]]&&v(s[n],i,r,o);return o.isPm&&12>r[3]&&(r[3]+=12),o.isPm===!1&&12===r[3]&&(r[3]=0),l(r,o.isUTC,o.tzh,o.tzm)}function x(t,e){var n,i,o,s,a,u=t.match(U)||[],c=99;for(o=0;e.length>o;o++)s=_(t,e[o]),i=y(new r(s),e[o]).match(U)||[],a=d(u,i),c>a&&(c=a,n=s);return n}function E(t){var e,n="YYYY-MM-DDT";if(G.exec(t)){for(e=0;4>e;e++)if(Z[e][1].exec(t)){n+=Z[e][0];break}return z.exec(t)?_(t,n+" Z"):_(t,n)}return new Date(t)}function b(t,e,n,i,r){var o=r.relativeTime[t];return"function"==typeof o?o(e||1,!!n,t,i):o.replace(/%d/i,e||1)}function S(t,e,n){var i=O(Math.abs(t)/1e3),r=O(i/60),o=O(r/60),s=O(o/24),a=O(s/365),u=45>i&&["s",i]||1===r&&["m"]||45>r&&["mm",r]||1===o&&["h"]||22>o&&["hh",o]||1===s&&["d"]||25>=s&&["dd",s]||45>=s&&["M"]||345>s&&["MM",O(s/30)]||1===a&&["y"]||["yy",a];return u[2]=e,u[3]=t>0,u[4]=n,b.apply({},u)}function w(t,e){T.fn[t]=function(t){var n=this._isUTC?"UTC":"";return null!=t?(this._d["set"+n+e](t),this):this._d["get"+n+e]()}}function A(t){T.duration.fn[t]=function(){return this._data[t]}}function N(t,e){T.duration.fn["as"+t]=function(){return+this/e}}for(var T,L,R="1.7.2",O=Math.round,M={},I="en",k="undefined"!=typeof module&&module.exports,C="months|monthsShort|weekdays|weekdaysShort|weekdaysMin|longDateFormat|calendar|relativeTime|ordinal|meridiem".split("|"),P=/^\/?Date\((\-?\d+)/i,D=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|YYYY|YY|a|A|hh?|HH?|mm?|ss?|SS?S?|zz?|ZZ?|.)/g,H=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?)/g,U=/([0-9a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)/gi,j=/\d\d?/,V=/\d{1,3}/,B=/\d{3}/,$=/\d{1,4}/,F=/[0-9a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+/i,z=/Z|[\+\-]\d\d:?\d\d/i,Y=/T/i,G=/^\s*\d{4}-\d\d-\d\d(T(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,q="YYYY-MM-DDTHH:mm:ssZ",Z=[["HH:mm:ss.S",/T\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/T\d\d:\d\d:\d\d/],["HH:mm",/T\d\d:\d\d/],["HH",/T\d\d/]],X=/([\+\-]|\d\d)/gi,J="Month|Date|Hours|Minutes|Seconds|Milliseconds".split("|"),W={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},K={},Q="DDD w M D d".split(" "),te="M D H h m s w".split(" "),ee={M:function(){return this.month()+1},MMM:function(t){return e("monthsShort",this.month(),this,t)},MMMM:function(t){return e("months",this.month(),this,t)},D:function(){return this.date()},DDD:function(){var t=new Date(this.year(),this.month(),this.date()),e=new Date(this.year(),0,1);return~~((t-e)/864e5+1.5)},d:function(){return this.day()},dd:function(t){return e("weekdaysMin",this.day(),this,t)},ddd:function(t){return e("weekdaysShort",this.day(),this,t)},dddd:function(t){return e("weekdays",this.day(),this,t)},w:function(){var t=new Date(this.year(),this.month(),this.date()-this.day()+5),e=new Date(t.getFullYear(),0,4);return~~((t-e)/864e5/7+1.5)},YY:function(){return a(this.year()%100,2)},YYYY:function(){return a(this.year(),4)},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return~~(this.milliseconds()/100)},SS:function(){return a(~~(this.milliseconds()/10),2)},SSS:function(){return a(this.milliseconds(),3)},Z:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+a(~~(t/60),2)+":"+a(~~t%60,2)},ZZ:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+a(~~(10*t/6),4)}};Q.length;)L=Q.pop(),ee[L+"o"]=i(ee[L]);for(;te.length;)L=te.pop(),ee[L+L]=n(ee[L],2);for(ee.DDDD=n(ee.DDD,3),T=function(e,n){if(null===e||""===e)return null;var i,o;return T.isMoment(e)?new r(new Date(+e._d),e._isUTC,e._lang):(n?i=c(n)?x(e,n):_(e,n):(o=P.exec(e),i=e===t?new Date:o?new Date(+o[1]):e instanceof Date?e:c(e)?l(e):"string"==typeof e?E(e):new Date(e)),new r(i))},T.utc=function(t,e){return c(t)?new r(l(t,!0),!0):("string"==typeof t&&!z.exec(t)&&(t+=" +0000",e&&(e+=" Z")),T(t,e).utc())},T.unix=function(t){return T(1e3*t)},T.duration=function(t,e){var n,i=T.isDuration(t),r="number"==typeof t,s=i?t._data:r?{}:t;return r&&(e?s[e]=t:s.milliseconds=t),n=new o(s),i&&(n._lang=t._lang),n},T.humanizeDuration=function(t,e,n){return T.duration(t,e===!0?null:e).humanize(e===!0?!0:n)},T.version=R,T.defaultFormat=q,T.lang=function(t,e){var n;if(!t)return I;if((e||!M[t])&&h(t,e),M[t]){for(n=0;C.length>n;n++)T[C[n]]=M[t][C[n]];T.monthsParse=M[t].monthsParse,I=t}},T.langData=p,T.isMoment=function(t){return t instanceof r},T.isDuration=function(t){return t instanceof o},T.lang("en",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},meridiem:function(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinal:function(t){var e=t%10;return 1===~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th"}}),T.fn=r.prototype={clone:function(){return T(this)},valueOf:function(){return+this._d},unix:function(){return Math.floor(+this._d/1e3)},toString:function(){return""+this._d},toDate:function(){return this._d},toArray:function(){var t=this;return[t.year(),t.month(),t.date(),t.hours(),t.minutes(),t.seconds(),t.milliseconds(),!!this._isUTC]},isValid:function(){return this._a?null!=this._a[8]?!!this._a[8]:!d(this._a,(this._a[7]?T.utc(this._a):T(this._a)).toArray()):!isNaN(this._d.getTime())},utc:function(){return this._isUTC=!0,this},local:function(){return this._isUTC=!1,this},format:function(t){return y(this,t?t:T.defaultFormat)},add:function(t,e){var n=e?T.duration(+e,t):T.duration(t);return u(this,n,1),this},subtract:function(t,e){var n=e?T.duration(+e,t):T.duration(t);return u(this,n,-1),this},diff:function(t,e,n){var i,r=this._isUTC?T(t).utc():T(t).local(),o=6e4*(this.zone()-r.zone()),s=this._d-r._d-o,a=this.year()-r.year(),u=this.month()-r.month(),c=this.date()-r.date();return i="months"===e?12*a+u+c/30:"years"===e?a+(u+c/30)/12:"seconds"===e?s/1e3:"minutes"===e?s/6e4:"hours"===e?s/36e5:"days"===e?s/864e5:"weeks"===e?s/6048e5:s,n?i:O(i)},from:function(t,e){return T.duration(this.diff(t)).lang(this._lang).humanize(!e)},fromNow:function(t){return this.from(T(),t)},calendar:function(){var t=this.diff(T().sod(),"days",!0),e=this.lang().calendar,n=e.sameElse,i=-6>t?n:-1>t?e.lastWeek:0>t?e.lastDay:1>t?e.sameDay:2>t?e.nextDay:7>t?e.nextWeek:n;return this.format("function"==typeof i?i.apply(this):i)},isLeapYear:function(){var t=this.year();return 0===t%4&&0!==t%100||0===t%400},isDST:function(){return this.zone()<T([this.year()]).zone()||this.zone()<T([this.year(),5]).zone()},day:function(t){var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null==t?e:this.add({d:t-e})},startOf:function(t){switch(t.replace(/s$/,"")){case"year":this.month(0);case"month":this.date(1);case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return this},endOf:function(t){return this.startOf(t).add(t.replace(/s?$/,"s"),1).subtract("ms",1)},sod:function(){return this.clone().startOf("day")},eod:function(){return this.clone().endOf("day")},zone:function(){return this._isUTC?0:this._d.getTimezoneOffset()},daysInMonth:function(){return T.utc([this.year(),this.month()+1,0]).date()},lang:function(e){return e===t?p(this):(this._lang=e,this)}},L=0;J.length>L;L++)w(J[L].toLowerCase(),J[L]);w("year","FullYear"),T.duration.fn=o.prototype={weeks:function(){return s(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+2592e6*this._months},humanize:function(t){var e=+this,n=this.lang().relativeTime,i=S(e,!t,this.lang()),r=0>=e?n.past:n.future;return t&&(i="function"==typeof r?r(i):r.replace(/%s/i,i)),i},lang:T.fn.lang};for(L in W)W.hasOwnProperty(L)&&(N(L,W[L]),A(L.toLowerCase()));N("Weeks",6048e5),k&&(module.exports=T),"undefined"==typeof ender&&(this.moment=T),"function"==typeof define&&define.amd&&define("moment",[],function(){return T})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};define("models/InfoModel",["require","backbone","moment"],function(t){var n,i,r;return n=t("backbone"),r=t("moment"),i=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.defaults={x:0,y:0},n.prototype.getTimeremaining=function(){var t;return t=this.get("retard")?this.getDelayTime():this.getWhenTime(),r.duration(t.diff(new Date))},n.prototype.getWhenTime=function(){return r(this.get("heure"))},n.prototype.getWhen=function(){return this.getWhenTime().format("HH:mm")},n.prototype.getDelayTime=function(){var t,e,n,i;return this.get("retard")?(t=this.get("retard"),e=""+t[0]+t[1],n=""+t[2]+t[3],t=r.duration({hours:parseInt(e,10),minutes:parseInt(n,10)}),i=r(this.get("heure")),i.add(t)):!1},n.prototype.getDelay=function(){var t;return t=this.getDelayTime(),t?t.format("HH:mm"):null},n.prototype.toJSON=function(){var t;return t=_(this.attributes).clone(),t.when=this.getWhen(),t.delay=this.getDelay(),t},n}(n.Model)})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};define("collections/InfoCollection",["require","backbone","models/InfoModel"],function(t){var n,i,r;return n=t("backbone"),r=t("models/InfoModel"),i=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.url="./infos",n.prototype.model=r,n}(n.Collection)})}.call(this),define("hbs!template/info/tableInfo",["hbs","handlebars"],function(t,e){var n=e.template(function(t,e,n){return n=n||t.helpers,'<div class="container">\n<div class="info-header">	\n<table class="table table-hover">\n  <thead>\n    <tr>\n      <th>Num</th>\n      <th>Dest</th>\n      <th>Type</th>\n      <th>Voie</th>\n      <th>Time</th>\n      <th>Estimated Time</th>\n    </tr>\n  </thead>\n  </table>\n</div>\n<table class="table table-hover info-body">\n  <tbody>\n  </tbody>\n</table>\n</div>'});return e.registerPartial("template_info_tableInfo",n),n}),define("hbs!template/notification",["hbs","handlebars"],function(t,e){var n=e.template(function(t,e,n){n=n||t.helpers;var i,r,o="",s="function",a=this.escapeExpression;return o+='<div class="container">\n  <div class="alert alert-',r=n.type,r?i=r.call(e,{hash:{}}):(i=e.type,i=typeof i===s?i():i),o+=a(i)+' message">\n    ',r=n.message,r?i=r.call(e,{hash:{}}):(i=e.message,i=typeof i===s?i():i),o+=a(i)+"\n  </div>\n</div>"});return e.registerPartial("template_notification",n),n}),define("hbs!template/loading",["hbs","handlebars"],function(t,e){var n=e.template(function(t,e,n){return n=n||t.helpers,'<div class="container">\n  <div class="message">\n    <div class="progress progress-striped active">\n      <div class="bar" style="width: 100%;"></div>\n    </div>\n  </div>\n</div>'});return e.registerPartial("template_loading",n),n}),function(){define("template/helpers/iconize",["handlebars"],function(t){var e;return e=function(t){var e;return e=function(){switch(t){case"TER":return"<img src='/img/ter.png'>";case"TGV":return"<img src='/img/tgv.jpg'>";case"INTERCITES":return"<img src='/img/intercite.png'>";case"BUS":return"<img src='/img/bus.png'>";case"IDTGV":return"<img src='/img/idtgv.png'>";default:return t}}()},t.registerHelper("iconize",e),e})}.call(this),define("hbs!template/info/rowInfo",["hbs","handlebars","template/helpers/capitalize","template/helpers/iconize"],function(t,e){var n=e.template(function(t,e,n){n=n||t.helpers;var i,r,o="",s="function",a=this.escapeExpression,u=n.helperMissing;return o+="<td>",r=n.num,r?i=r.call(e,{hash:{}}):(i=e.num,i=typeof i===s?i():i),o+=a(i)+"</td>\n<td>",i=e.origdest,r=n.capitalize,i=r?r.call(e,i,{hash:{}}):u.call(e,"capitalize",i,{hash:{}}),o+=a(i)+"</td>\n<td>",i=e.type,r=n.iconize,i=r?r.call(e,i,{hash:{}}):u.call(e,"iconize",i,{hash:{}}),(i||0===i)&&(o+=i),o+="</td>\n<td>",r=n.voie,r?i=r.call(e,{hash:{}}):(i=e.voie,i=typeof i===s?i():i),o+=a(i)+"</td>\n<td>",r=n.when,r?i=r.call(e,{hash:{}}):(i=e.when,i=typeof i===s?i():i),o+=a(i)+"</td>\n<td>",r=n.delay,r?i=r.call(e,{hash:{}}):(i=e.delay,i=typeof i===s?i():i),o+=a(i)+"</td>"});return e.registerPartial("template_info_rowInfo",n),n}),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};define("views/InfoRowView",["require","backbone","hbs!template/info/rowInfo","event"],function(t){var n,i,r,o;return n=t("backbone"),o=t("hbs!template/info/rowInfo"),i=t("event"),r=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.tagName="tr",n.prototype.events={click:"selectInfo"},n.prototype.selectInfo=function(){return i.trigger("info:selected",this.model)},n.prototype.render=function(){return this.$el.html(o(this.model.toJSON())),this.model.get("retard")&&this.$el.addClass("warning"),this
},n}(n.View)})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};define("views/InfoView",["require","backbone","event","collections/InfoCollection","hbs!template/info/tableInfo","hbs!template/notification","hbs!template/loading","views/InfoRowView","moment"],function(t){var n,i,r,o,s,a,u,c,d;return n=t("backbone"),i=t("event"),r=t("collections/InfoCollection"),d=t("hbs!template/info/tableInfo"),c=t("hbs!template/notification"),a=t("hbs!template/loading"),o=t("views/InfoRowView"),u=t("moment"),s=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(t){return this.rowViews=[],this.type=t.type,"A"===this.type?this.setElement($("#arrivalView")):this.setElement($("#departView")),this.model=t.model,this.collection=new r,this.listenTo(this.collection,"request",this.displayloading),this.listenTo(this.collection,"sync",this.render),this.listenTo(this.collection,"error",this.onError),i.on("station:selected",this.loopPopulateData,this)},n.prototype.loopPopulateData=function(t){var e=this;return this.populateData(t),null!=this.intervalID&&clearInterval(this.intervalID),this.intervalID=setInterval(function(){return e.populateData(t)},3e5)},n.prototype.populateData=function(t){return this.collection.fetch({data:{code:t.get("code_ddg")}})},n.prototype.render=function(){var t,e=this;return this.infos=new r(this.collection.toJSON()[0][this.type]),this.$el.html(d()),this.infos.forEach(function(t,n){return e.rowViews[n]=new o({model:t}),e.$el.find("tbody").append(e.rowViews[n].render().el)}),t=u().format("LT"),$("#lastupdate").html(t)},n.prototype.onError=function(){return this.$el.html(c({type:"error",message:"error communication"}))},n.prototype.displayloading=function(){return this.$el.html(a())},n.prototype.hide=function(){return this.$el.hide()},n.prototype.show=function(){return $("ul.nav li").removeClass("active"),"A"===this.type?$($("ul.nav li")[2]).addClass("active"):$($("ul.nav li")[1]).addClass("active"),this.$el.fadeIn()},n}(n.View)})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};define("router",["require","backbone","views/misc/app","views/MapStationView","views/InfoView"],function(t){var n,i,r,o,s;return i=t("backbone"),n=t("views/misc/app"),o=t("views/MapStationView"),r=t("views/InfoView"),s=function(t){function s(){return s.__super__.constructor.apply(this,arguments)}return e(s,t),s.prototype.routes={arrivals:"arrival",departure:"departure",map:"map","*actions":"map"},s.prototype.home=function(){},s.prototype.arrival=function(){return this.arrivalInfoView.show(),this.departureInfoView.hide(),this.mapView.hide()},s.prototype.departure=function(){return this.departureInfoView.show(),this.arrivalInfoView.hide(),this.mapView.hide()},s.prototype.map=function(){return this.mapView.show(),this.departureInfoView.hide(),this.arrivalInfoView.hide()},s.prototype.initialize=function(){var t,e;return this.mapView=new o,this.departureInfoView=new r({type:"D"}),this.arrivalInfoView=new r({type:"A"}),this.appView=new n,t=!1,e=!!(t&&window.history&&window.history.pushState),i.history.start({pushState:e})},s}(i.Router)})}.call(this),function(){require.config({paths:{zepto:"vendors/zepto.min",jherezepto:"vendors/zepto.adapter",selector:"vendors/selector",fx_methods:"vendors/fx_methods",detect:"vendors/detect",underscore:"vendors/underscore",backbone:"vendors/backbone",i18nprecompile:"vendors/require-handlebars-plugin/hbs/i18nprecompile",json2:"vendors/require-handlebars-plugin/hbs/json2",hbs:"vendors/require-handlebars-plugin/hbs",handlebars:"vendors/Handlebars",jhere:"vendors/jhere",moment:"vendors/moment.min",text:"vendors/text",json:"vendors/json",template:"../template"},shim:{underscore:{exports:"_"},zepto:{exports:"$"},fx_methods:{exports:"$",deps:["zepto"]},jherezepto:{exports:"$",deps:["zepto"]},selector:{deps:["zepto"],exports:"$"},detect:{deps:["zepto"],exports:"$"},jhere:{exports:"$",deps:["jherezepto"]},backbone:{deps:["underscore","zepto"],exports:"Backbone"}},hbs:{templateExtension:"hbs",disableI18n:!0,"hbs/underscore":"underscore"}}),require(["router"],function(t){return this.router=new t})}.call(this),define("main",function(){});